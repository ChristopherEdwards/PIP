RPADDR ; Procedure RPADDR - Retirement Plan Address
 ;;Copyright(c)2005 Sanchez Computer Associates, Inc.  All Rights Reserved - 08/09/05 10:35 - spatola
 ;
 ; **** This is a DATA-QWIK generated routine (level 25) ****
 ;

	/* ---------- Revision History --------------------------------------
	  
	   07/11/00 - SHANL - 41037
              	      Converted the M reference to PSL format.

	   04/28/00 - ROYTENBERGG 39488
                      Corrected compilation error by commented the code.
	              This procedure is being used to retrieve retirement plan
	              address information in V5.3 only. In v5.4 this retrieve
	              functionality shouldn't be supported at the present time.
	
	   12/29/99 - ROYTENBERGG 36053
	              Added a dash between to support format *****-****.
	
	 */

	quit
	
Public FULLADDR(XACN,XRPASEQ)	// Retrieve retirement plan address information

	/*
	
	   This proceudre will be used to retrieve retirement plan address
	   information for 1099-R and IRS 5498 Forms
	
	   KEYWORDS:
	
	   RETURNS:
	        . ACN          /TYP=N/REQ/
	        . RPASEQ       /TYP=N/REQ/
	   EXAMPLE:
	
	*/
	new CIFREC,RPREC
	
	set CIFREC=Db.getOneRow("PCITY,PSTATE,PZIP,PCNTRY,PAD1,PAD2,PAD3","CIF","XACN")
	set RPREC=""

	//set RPREC=Db.getOneRow("RPCITY,RPSTATE,RPZIP,RPCNTRY,RPMAD1,RPMAD2,RPMAD3","IRATYPE","XACN,XRPASEQ")   //ARQ39488	
	
	new X
	if $TR(RPREC,$C(9),"")'="" set X=RPREC
	else  set X=CIFREC
	
	new ADDR,CITY,STATE,ZIP,CNTRY,RPADDR
	
	set ADDR=$P(X,$C(9),5)_"|"_$P(X,$C(9),6)_"|"_$P(X,$C(9),7)
	// Payee City
	set CITY=$P(X,$C(9),1)                 
	// Payee State
	set STATE=$P(X,$C(9),2)               
	set ZIP=$P($P(X,$C(9),3),"-",1)_"-"_$P($P(X,$C(9),3),"-",2)
	set CNTRY=$P(X,$C(9),4)
	set RPADDR=ADDR_"|"_CITY_"|"_STATE_"|"_ZIP_"|"_CNTRY

	quit RPADDR
	

vSIG()	quit "59886^43601^Sanchez SCM Administrator^1543"	// Signature - LTD^TIME^USER^SIZE
