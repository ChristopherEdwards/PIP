PROCSAN		/*

	   ARGUMENTS:
	   . IRN/EIRN Nominal Int. Rate/Eff. Int. Rate  /TYP=N/REQ/MECH=VAL
	
	   . IACF     Int. Annuity Compounding Factor   /TYP=N/REQ/MECH=VAL
	
	   . DIST1AF Distribution 1 Annual Factor      /TYP=N/REQ/MECH=VAL
	
	   RETURNS:
	         . $$    Error Message                             /TYP=T
	                 Null= No Error
	  
	   Revision History
	
	   08/17/99 - CHOK - 33890
		Converted procedure code to PSL.          

	   LIBRARY
	   $$EIRN	- Calculate IRN
	   $$IRN	- Calculate EIRN

	*/
		
	quit

EIRN(RecordLN ln,EIRN,IACF,DIST1AF)	// Calculate IRN

	new IRN,TMP,TMP2
	if EIRN="" quit EIRN
	if IACF'=2 set ln.irn=ln.eirn quit ln.irn
	if DIST1AF=0 do Runtime.setErrMSG("LN",6970) if ER quit ""
	set TMP=(1+(EIRN/100/IACF)) if TMP<1 do Runtime.setErrMSG("LN",6971) if ER quit ""
	set TMP2=(IACF/DIST1AF)*$$LNX^%ZFUNC(TMP) if TMP2>87 do Runtime.setErrMSG("LN",6972) if ER quit ""
	set IRN=($$EXP^%ZFUNC(TMP2)-1)*DIST1AF*100
	set IRN=$J(IRN,0,5)
	quit IRN
	
IRN(RecordLN ln,IRN,IACF,DIST1AF)	// Calculate EIRN

	new EIRN,TMP,TMP2
	if IRN="" quit IRN
	if IACF'=2 set ln.eirn=ln.irn quit ln.eirn
	if DIST1AF=0 do Runtime.setErrMSG("LN",6970) if ER quit ""
	set TMP=(1+(IRN/100/DIST1AF)) if TMP<1 do Runtime.setErrMSG("LN",6973) if ER quit ""
	set TMP2=(DIST1AF/IACF)*$$LNX^%ZFUNC(TMP) if TMP2>87 do Runtime.setErrMSG("LN",6974) if ER quit ""
	set EIRN=($$EXP^%ZFUNC(TMP2)-1)*IACF*100
	set EIRN=$J(EIRN,0,5)
	quit EIRN
 #OPTION ResultClass ON
Public String vSIG()	quit "59886^43603^Sanchez SCM Administrator^1391"	// Signature - LTD^TIME^USER^SIZE
