ANTSWP		/* 
	 ORIG: OFALTR - 10/06/1999
 	 DESC: Anticipated Sweep:  This Procedure will call the batch
		 definition BCHSWPCT with the flag 'nopost' set to 1 so no 
		 transactions will be posted to the PROFILE account.  Then a
		 report will be printed and stored in the spool directory. 
 
	----- Revision History -------------------------------------------
	09/21/06 - GIRIDHAL - CR 22186
		   Removed Public reference from variables %BLK, ET, IO, PGM,
		   RID, spldir and nopost. This is following an 'Invalid Device'
		   error that was happening because these variables were not newed.
		   In the earlier version of this same report (Profile01) these
		   variables are newed.
		   
	11/26/05 - ALAGARSS - CR 18006
		   Removed deprecated method Db.getOneRow and replaced with
		   Db.getRecord.
	
	12/09/99 - OFALTR - 35026
		   Changed the check for DAYENDSWPFA from the method isDefined
		   to use the method currVal.
	------------------------------------------------------------------
 
	*/
	type public Date TJD,DATE
	type String %BLK,ET,IO,PGM,RID,spldir	
	type Number nopost
	
	set nopost=1

        //kill DAYENDSWPFA if file was allready created for that day
        if Db.currVal("DAYENDSWPFA","TJD")'="" do Db.fastDelete("DAYENDSWPFA","TJD=:TJD")

	do DRV^UBCHID("BCHSWPPCT")

	set RID="SCA608BX" do ^URID if PGM="" set ET="INVLDRPT" do ERR quit
	
	set DATE=$$DAT^%ZM(TJD,"MMDD")
	type RecordCUVAR cuvar=Db.getRecord("CUVAR")
	set spldir=cuvar.spldir
	set IO=RID_DATE_".REP"
	set IO=$$FILE^%TRNLNM(IO,spldir)
	set %BLK="/,"_IO_","_TJD_",N"
	do ^@PGM
	quit

ERR	
	type public Boolean ER
	type public String VFMQ
	
	set ER=1 do ^UTLERR
	set VFMQ="quit"
	quit 
 #OPTION ResultClass ON
Public String vSIG()	quit "60529^36188^Lakshmi Giridharan^1614"	// Signature - LTD^TIME^USER^SIZE
