V01S362(Number %ProcessMode,RecordSCAU fSCAU)   //SCA - SCA - SID= <SCAUSR> PROFILE User Set-Up (Tables/ G/L Link)
 ;;Copyright(c)2007 Sanchez Computer Associates, Inc.  All Rights Reserved - 11/09/2007 16:34 - chenardp
  /*
ORIG: CHENARDP - 03/03/2003
DESC: PSL Screen Compiler Template

---- Comments --------------------------------------------------------
	This procedure is used as the base template for the PSL screen compiler.
	It is referenced by the PSL screen compiler - procedure DBS2PSL4
	
	
---- Revision History ------------------------------------------------
	02/18/07 - Pete Chenard - CR23555
		   Corrected compiler warnings.
		   
	02/23/06 - Pete Chenard - CR19551
		   Fixed routine label.
		   
	05/19/05 - Pete Chenard - CR 14146
		   Modified to type variables.
		   
	12/1/03 - Spier -cr7178
	   	     Modifications to correct dead code warnings and
	   	     other issues that occurred during mass compile of screens.

	09/24/03 - Pete Chenard - 45497
		       Created screen template for compiler.
----------------------------------------------------------------------

 */

 #WARN SCOPE OFF
	type Public String %MODS,%PAGE,%PG,%REPEAT,ER,RM
	type String KEYS(),KVAR,VFSN(),VO,VODFT,VPGM,vPSL,VSID,VSNAME

	// %O (0-Create  1-Modify  2-Inquiry  3-Delete  4-Print  5-Blank screen)

	set:'%ProcessMode.exists() %ProcessMode=5
 if (%ProcessMode = 5) do {
  if 'fSCAU.exists() set fSCAU = Class.new("RecordSCAU")
 }
 set KVAR="kill %TAB,VFSN,VO,VPTBL,vtab",VSID="SCAUSR",VPGM=$T(+0),VSNAME="PROFILE User Set-Up (Tables/ G/L Link)"
 set VFSN("SCAU")="zfSCAU"
 set vPSL=1
 set KEYS(1)=fSCAU.UID
 //
	// ==================== Display blank screen         (%O=5)

 if %ProcessMode=5 do VPR(.fSCAU),VDA1(.fSCAU),^DBSPNT() quit

 if '%ProcessMode do VNEW(.fSCAU),VPR(.fSCAU),VDA1(.fSCAU)
 if %ProcessMode do VLOD(.fSCAU) quit:$G(ER)  do VPR(.fSCAU),VDA1(.fSCAU)

	// ====================  Display Form
	do ^DBSPNT()
	#ACCEPT DATE=11/05/03; PGM=Screen Compiler;CR=UNKNOWN;GROUP=XECUTE
	if %ProcessMode=2!(%ProcessMode=3) do ^DBSCRT8A X:'$D(%PAGE) KVAR quit  // Inquiry/Delete
	// ====================  Set up data entry control table


 if %ProcessMode<2 do VTAB(.fSCAU)
	quit


VNEW(RecordSCAU fSCAU) // Initialize arrays if %O=0
 
 do VDEF(.fSCAU)
 do VLOD(.fSCAU)
 #ACCEPT Date=11/5/03;PGM=Screen Compiler;CR=UNKNOWN;GROUP=SYNTAX
 quit
	#ACCEPT DATE=11/05/03; PGM=Screen Compiler;CR=UNKNOWN;GROUP=DEAD
	quit
	
VDEF(RecordSCAU fSCAU)
 #ACCEPT Date=11/5/03;PGM=Screen Compiler;CR=UNKNOWN;GROUP=SYNTAX
 quit
 ;
VLOD(RecordSCAU fSCAU) // Load data from disc - %O = (1-5)
	#ACCEPT DATE=11/05/03; PGM=Screen Compiler;CR=UNKNOWN;GROUP=DEAD
	quit


	type Public String %MODS,%REPEAT
	quit
	

VPR(RecordSCAU fSCAU) // Display screen prompts
 set VO="36||13|0"
 set VO(0)="|0"
 set VO(1)=$C(1,19,1,1,0,0,0,0,0,0)_"01T "
 set VO(2)=$C(1,20,35,1,0,0,0,0,0,0)_"01TUser Set-Up (Tables/ G/L Linkages) "
 set VO(3)=$C(3,13,9,0,0,0,0,0,0,0)_"01T User ID:"
 set VO(4)=$C(3,49,15,1,0,0,0,0,0,0)_"01T PMing Allowed:"
 set VO(5)=$C(4,6,16,1,0,0,0,0,0,0)_"01T User Full Name:"
 set VO(6)=$C(5,11,11,1,0,0,0,0,0,0)_"01T Userclass:"
 set VO(7)=$C(5,55,9,1,0,0,0,0,0,0)_"01TPassword:"
 set VO(8)=$C(6,2,20,1,0,0,0,0,0,0)_"01T Tran Suspense (DR):"
 set VO(9)=$C(6,44,20,1,0,0,0,0,0,0)_"01T Tran Suspense (CR):"
 set VO(10)=$C(7,9,13,0,0,0,0,0,0,0)_"01T Branch Code:"
 set VO(11)=$C(7,50,14,0,0,0,0,0,0,0)_"01TUser Language:"
 set VO(12)=$C(8,4,18,0,0,0,0,0,0,0)_"01TAuto Menu Enabled:"
 set VO(13)=$C(8,48,16,0,0,0,0,0,0,0)_"01TCustomer Number:"
 set VO(14)=$C(9,2,20,0,0,0,0,0,0,0)_"01TPosting Environment:"
 set VO(15)=$C(9,39,25,0,0,0,0,0,0,0)_"01T DATA-QWIK Editor Option:"
 set VO(16)=$C(10,9,13,0,0,0,0,0,0,0)_"01TLimit to EMU:"
 set VO(17)=$C(10,50,14,0,0,0,0,0,0,0)_"01TEmail Address:"
 set VO(18)=$C(11,2,20,0,0,0,0,0,0,0)_"01TPassword Expiration:"
 set VO(19)=$C(11,37,27,0,0,0,0,0,0,0)_"01TFunction Key Default Table:"
 set VO(20)=$C(12,7,15,0,0,0,0,0,0,0)_"01TMarket Segment:"
 set VO(21)=$C(12,53,11,0,0,0,0,0,0,0)_"01TSegment ID:"
 set VO(22)=$C(14,18,43,1,0,0,0,0,0,0)_"01T Complete this section for on-line tellers "
 set VO(23)=$C(15,4,19,0,0,0,0,0,0,0)_"01TCash Over G/L Acct:"
 set VO(24)=$C(15,44,20,0,0,0,0,0,0,0)_"01TCash Short G/L Acct:"
 set VO(25)=$C(16,6,17,0,0,0,0,0,0,0)_"01TOverall Cash Max:"
 set VO(26)=$C(16,47,17,0,0,0,0,0,0,0)_"01TOverall Cash Min:"
 set VO(27)=$C(18,15,49,1,0,0,0,0,0,0)_"01T Complete this section for batch process tellers "
 set VO(28)=$C(19,4,18,0,0,0,0,0,0,0)_"01TReconciling Debit:"
 set VO(29)=$C(19,45,19,0,0,0,0,0,0,0)_"01TReconciling Credit:"
 set VO(30)=$C(20,1,21,0,0,0,0,0,0,0)_"01TOverdraft Protection:"
 set VO(31)=$C(20,27,16,0,0,0,0,0,0,0)_"01TReject Handling:"
 set VO(32)=$C(20,51,13,0,0,0,0,0,0,0)_"01TRetry Teller:"
 set VO(33)=$C(21,10,12,0,0,0,0,0,0,0)_"01TMax Retries:"
 set VO(34)=$C(21,28,15,0,0,0,0,0,0,0)_"01TSame Day Retry:"
 set VO(35)=$C(21,52,12,0,0,0,0,0,0,0)_"01TO/D Retries:"
 set VO(36)=$C(22,19,24,0,0,0,0,0,0,0)_"01TTransaction Sort Option:"
	#ACCEPT DATE=11/05/03; PGM=Screen Compiler;CR=UNKNOWN;GROUP=DEAD
	quit


VDA1(RecordSCAU fSCAU)  // Display screen data
 new V
 //
 set VO="68|37|13|0"
 set VO(37)=$C(3,23,20,2,0,0,0,0,0,0)_"01T"_$E(fSCAU.UID,1,20)
 set VO(38)=$C(3,65,1,2,0,0,0,0,0,0)_"00L"_$S(fSCAU.TPM:"Y",1:"N")
 set VO(39)=$C(4,23,40,2,0,0,0,0,0,0)_"00T"_$E(fSCAU.%UFN,1,40)
 set VO(40)=$C(5,23,12,2,0,0,0,0,0,0)_"00T"_$E(fSCAU.%UCLS,1,12)
 set V="" set VO(41)=$C(5,65,12,2,0,0,0,0,0,0)_"00T"_""
 set VO(42)=$C(6,23,12,2,0,0,0,0,0,0)_"00N"_fSCAU.TSDR
 set VO(43)=$C(6,65,12,2,0,0,0,0,0,0)_"00N"_fSCAU.TSCR
 set VO(44)=$C(7,23,6,2,0,0,0,0,0,0)_"00N"_fSCAU.BRCD
 set VO(45)=$C(7,65,12,2,0,0,0,0,0,0)_"00T"_$E(fSCAU.LANG,1,12)
 set VO(46)=$C(8,23,1,2,0,0,0,0,0,0)_"00L"_$S(fSCAU.AUTOMENU:"Y",1:"N")
 set VO(47)=$C(8,65,12,2,0,0,0,0,0,0)_"00N"_fSCAU.ACN
 set VO(48)=$C(9,23,1,2,0,0,0,0,0,0)_"00N"_fSCAU.CURRENV
 set VO(49)=$C(9,65,3,2,0,0,0,0,0,0)_"00T"_$E(fSCAU.EDITOR,1,3)
 set VO(50)=$C(10,23,1,2,0,0,0,0,0,0)_"00L"_$S(fSCAU.EMULIM:"Y",1:"N")
 set VO(51)=$C(10,65,16,2,0,0,0,0,0,0)_"00T"_$E(fSCAU.EADDR,1,55)
 set VO(52)=$C(11,23,10,2,0,0,0,0,0,0)_"01D"_$$DAT^%ZM(fSCAU.PEXPR)
 set VO(53)=$C(11,65,12,2,0,0,0,0,0,0)_"00T"_$E(fSCAU.TFKDEF,1,12)
 set VO(54)=$C(12,23,12,2,0,0,0,0,0,0)_"00N"_fSCAU.MARSEG
 set VO(55)=$C(12,65,12,2,0,0,0,0,0,0)_"00N"_fSCAU.SEGID
 set VO(56)=$C(15,24,12,2,0,0,0,0,0,0)_"00N"_fSCAU.CSOVR
 set VO(57)=$C(15,65,12,2,0,0,0,0,0,0)_"00N"_fSCAU.CSSHRT
 set V=$S(fSCAU.OACMAX="":"",1:$J(fSCAU.OACMAX,0,2)) set VO(58)=$C(16,24,12,2,0,0,0,0,0,0)_"00$"_$S(fSCAU.OACMAX="":"",1:$J(fSCAU.OACMAX,0,2))
 set V=$S(fSCAU.OACMIN="":"",1:$J(fSCAU.OACMIN,0,2)) set VO(59)=$C(16,65,12,2,0,0,0,0,0,0)_"00$"_$S(fSCAU.OACMIN="":"",1:$J(fSCAU.OACMIN,0,2))
 set VO(60)=$C(19,23,12,2,0,0,0,0,0,0)_"00N"_fSCAU.RODR
 set VO(61)=$C(19,65,12,2,0,0,0,0,0,0)_"00N"_fSCAU.ROCR
 set VO(62)=$C(20,23,1,2,0,0,0,0,0,0)_"00N"_fSCAU.ODP
 set VO(63)=$C(20,44,1,2,0,0,0,0,0,0)_"00N"_fSCAU.BATREJ
 set VO(64)=$C(20,65,12,2,0,0,0,0,0,0)_"00T"_$E(fSCAU.RTUID,1,12)
 set VO(65)=$C(21,23,2,2,0,0,0,0,0,0)_"00N"_fSCAU.MARTY
 set VO(66)=$C(21,44,1,2,0,0,0,0,0,0)_"00L"_$S(fSCAU.SDRTY:"Y",1:"N")
 set VO(67)=$C(21,65,2,2,0,0,0,0,0,0)_"00N"_fSCAU.ODPRET
 set VO(68)=$C(22,44,1,2,0,0,0,0,0,0)_"00N"_fSCAU.TRNSRT
	#ACCEPT DATE=11/05/03; PGM=Screen Compiler;CR=UNKNOWN;GROUP=DEAD
	quit
	
	
VTAB(RecordSCAU fSCAU)
 
 kill VSCRPP,REQ,%TAB,%MOD,%MODOFF,%MODGRP,%REPREQ,vtab
 set %MAX=32,VPT=1,VPB=22,PGM=$T(+0),DLIB="SYSDEV",DFID="SCAU"
 set OLNTB=22044
 
 set VFSN("SCAU")="zfSCAU"
 //
 // 
	
	
 set %TAB(1)=$C(2,22,20)_"21T12401|1|[SCAU]UID"
 set %TAB(2)=$C(2,64,1)_"00L12418|1|[SCAU]TPM"
 set %TAB(3)=$C(3,22,40)_"01T12401|1|[SCAU]%UFN||||do VP1^V01S362(.fSCAU)"
 set %TAB(4)=$C(4,22,12)_"01T12405|1|[SCAU]%UCLS|[SCAU0]||do VP2^V01S362(.fSCAU)"
 set %TAB(5)=$C(4,64,12)_"10T12406|1|[SCAU]PSWD|||do VP3^V01S362(.fSCAU)"
 set %TAB(6)=$C(5,22,12)_"01N12409|1|[SCAU]TSDR|[GLAD]"
 set %TAB(7)=$C(5,64,12)_"01N12410|1|[SCAU]TSCR|[GLAD]"
 set %TAB(8)=$C(6,22,6)_"00N12422|1|[SCAU]BRCD|[UTBLBRCD]"
 set %TAB(9)=$C(6,64,12)_"00T12403|1|[SCAU]LANG|[UTBLLANG]"
 set %TAB(10)=$C(7,22,1)_"00L12402|1|[SCAU]AUTOMENU"
 set %TAB(11)=$C(7,64,12)_"00N12414|1|[SCAU]ACN|||do VP4^V01S362(.fSCAU)"
 set %TAB(12)=$C(8,22,1)_"00N12429|1|[SCAU]CURRENV|[STBLCURRENV]||do VP5^V01S362(.fSCAU)"
 set %TAB(13)=$C(8,64,3)_"00T12421|1|[SCAU]EDITOR|[DBCTL]CODE:QU ""[DBCTL]NAME=""""EDITOR"""""""
 set %TAB(14)=$C(9,22,1)_"00L12436|1|[SCAU]EMULIM|||do VP6^V01S362(.fSCAU)|do VP7^V01S362(.fSCAU)"
 set %TAB(15)=$C(9,64,16)_"00T12448|1|[SCAU]EADDR|||||||||55"
 set %TAB(16)=$C(10,22,10)_"21D12407|1|[SCAU]PEXPR"
 set %TAB(17)=$C(10,64,12)_"00T12427|1|[SCAU]TFKDEF"
 set %TAB(18)=$C(11,22,12)_"00N12437|1|[SCAU]MARSEG|[UTBLMARSEG]"
 set %TAB(19)=$C(11,64,12)_"00N12438|1|[SCAU]SEGID||||do VP8^V01S362(.fSCAU)"
 set %TAB(20)=$C(14,23,12)_"00N12411|1|[SCAU]CSOVR|[GLAD]"
 set %TAB(21)=$C(14,64,12)_"00N12412|1|[SCAU]CSSHRT|[GLAD]"
 set %TAB(22)=$C(15,23,12)_"00$12434|1|[SCAU]OACMAX|||do VP9^V01S362(.fSCAU)||||2"
 set %TAB(23)=$C(15,64,12)_"00$12435|1|[SCAU]OACMIN|||do VP10^V01S362(.fSCAU)||||2"
 set %TAB(24)=$C(18,22,12)_"00N12415|1|[SCAU]RODR|[GLAD]"
 set %TAB(25)=$C(18,64,12)_"00N12416|1|[SCAU]ROCR|[GLAD]"
 set %TAB(26)=$C(19,22,1)_"00N12432|1|[SCAU]ODP|[STBLPATODP]"
 set %TAB(27)=$C(19,43,1)_"00N12417|1|[SCAU]BATREJ|[STBLBATREJ]"
 set %TAB(28)=$C(19,64,12)_"00T12419|1|[SCAU]RTUID|[SCAU]||||||||20"
 set %TAB(29)=$C(20,22,2)_"00N12420|1|[SCAU]MARTY|||||0"
 set %TAB(30)=$C(20,43,1)_"00L12431|1|[SCAU]SDRTY|||do VP11^V01S362(.fSCAU)"
 set %TAB(31)=$C(20,64,2)_"00N12433|1|[SCAU]ODPRET|||do VP12^V01S362(.fSCAU)"
 set %TAB(32)=$C(21,43,1)_"00N12447|1|[SCAU]TRNSRT|[STBLTRNSRT]"
 do VTBL(.fSCAU),VDEPRE(.fSCAU) if $G(ER) quit
	do ^DBSCRT8 	// data entry
	quit


VREQ   // Create REQ() array
	#ACCEPT DATE=11/05/03; PGM=Screen Compiler;CR=UNKNOWN;GROUP=DEAD
	quit


VTBL(RecordSCAU fSCAU) //Create %TAB(array)
 	// 1 2 3  4 5   6   7-9 10-11
 	// DY,DX,SZ PT REQ TYPE DEL POS |NODE|ITEM NAME|TBL|FMT|PP|PRE|MIN|MAX|DEC

	#ACCEPT DATE=11/05/03; PGM=Screen Compiler;CR=UNKNOWN;GROUP=DEAD
	quit


VDEPRE(RecordSCAU fSCAU)  // Data Entry Pre-processor
 
 if CUVAR.CURRENV quit
 do DELETE^DBSMACRO("SCAU.CURRENV","1","0")
 do PROTECT^DBSMACRO("SCAU.CURRENV")
 
 quit
	#ACCEPT DATE=11/05/03; PGM=Screen Compiler;CR=UNKNOWN;GROUP=DEAD
	quit


  //user-defined post procs
 //
VP1(RecordSCAU fSCAU) //
 if fSCAU.%ufn.isNull(), fSCAU.acn do {
	type RecordCIF cif = Db.getRecord("CIF", "ACN=:fSCAU.acn", 1)
 	do DEFAULT^DBSMACRO("SCAU.%ufn", cif.nam, "1", "0", "0")
 	}
 quit

VP2(RecordSCAU fSCAU) //
 /*
   Revision History

   03/31/05 - SmithCD - CR 13782
	      Modified setErrMSG method calls to pass table name as first 
	      parameter to prevent error.

   02/01/05 - SmithCD - CR 13661
	      Added the classNew (third) parameter to the first .getRecord 
	      on SCAU0 to accommodate the use of .getMode on the
	      subsequent line. Fixes "Record not found" error in an oracle
	      environment. Modified to comply with currrent standards.

 */

 type public String X

 if X.isNull() quit

 type RecordSCAU0 scaucls0 = Db.getRecord("SCAU0", "UCLS=:X", 1)
 if scaucls0.getMode() = 0 quit

 // Secure user class may set up anyone
 type RecordSCAU0 scaucls1 = Db.getRecord("SCAU0","UCLS=:%UCLS")
 if +scaucls1.secucls quit

 // Anyone can set up to non-secure user class
 if 'scaucls0.secucls quit

 // Userclass ~p1 cannot add users to a secure userclass
 do Runtime.setErrMSG("SCAU0", 2895, %UCLS) quit

 quit

VP3(RecordSCAU fSCAU) //
 /* Revision History

    01/10/06 - KELLYP - CR 18930
	       Modified PWDLEN to scaucls0.pwdlen to prevent an UNDEFINED 
	       error.

    03/31/05 - SmithCD - CR 13782
               Modified setErrMSG method calls to pass table name as first
               parameter to prevent error.

    02/01/05 - SmithCD - CR 13661
	       Modified to comply with current PSL standards.

 */

 type public String X, V
 type public Boolean ER

 // Data required
 if X.isNull(), V.isNull() do Runtime.setErrMSG("SCAU", 741) quit

 /*
 X will be null if the user enters nothing in secret mode ,we set it to its
 starting value
 */

 if X = V quit                            
 if X.isNull() set X = V quit 
 
 type RecordSCAU0 scaucls0=Db.getRecord("SCAU0", "UCLS=:fSCAU.%ucls")

 // Password length must be at least ~p1 characters
 if X.length() < scaucls0.pwdlen do Runtime.setErrMSG("SCAU", 2139, scaucls0.pwdlen) quit

 type String PSWDAUT, SAVEX
 type Number ENC

 set SAVEX = X
 do PWD^SCADRV1(.fSCAU, .ENC, .PSWDAUT)
 set X = SAVEX
 if ER.get() quit                            

 set X = $$ENC^SCAENC(X)
 
 // Also update SCAU.PSWDAUT if changes to SCAU.PSWD are filed.
 type String pswdaut
 set ER = $$ENC^%ENCRYPT(SAVEX, .pswdaut)
 do DEFAULT^DBSMACRO("SCAU.PSWDAUT", pswdaut.get(), "1", "0", "0")

 quit

VP4(RecordSCAU fSCAU) //
 type public Number X

 if X.isNull() quit 

 do CUS^UACN1

 quit 

VP5(RecordSCAU fSCAU) //
 type public Number X

 if X = 0 do DEFAULT^DBSMACRO("SCAU.EMULIM",0,"1","0","0")

 quit

VP6(RecordSCAU fSCAU) //
 type public Boolean X

 if CUVAR.EMU = 0 ! (fSCAU.currenv = 0) set X = 0

 quit
 
VP7(RecordSCAU fSCAU) //
 if CUVAR.EMU = 0 do DEFAULT^DBSMACRO("SCAU.EMULIM",0,"1","0","0")

 quit

VP8(RecordSCAU fSCAU) //
 /*
   Revision History
 
   01/10/06 - KELLYP - CR 18930
	      Modified to remove check on null value for ZMARSEG.  This
	      fixes an issue where any value could be entered for the
	      Segment ID column when the Market Segment column wasn't
	      defined.
 */

 type String zv

 set zv = "[UTBLMARSEGDT]SEGID:QU ""[UTBLMARSEGDT]MARSEG="_fSCAU.marseg_""""
 
 do CHANGE^DBSMACRO("TBL",zv)
 
 quit

VP9(RecordSCAU fSCAU) //
 /* Revision History

   03/31/05 - SmithCD - CR 13782
              Modified setErrMSG method calls to pass table name as first
              parameter to prevent error.

 */

 type public Number X

 if X.isNull() quit 

 // Minimum must be less than or equal to maximum
 if X < +fSCAU.oacmin do Runtime.setErrMSG("SCAU", 1737) quit

 quit

VP10(RecordSCAU fSCAU) //
 /*
   03/31/05 - SmithCD - CR 13782
              Modified setErrMSG method calls to pass table name as first
              parameter to prevent error.
 */

 type public Number X

 if X.isNull() quit 

 // Minimum must be less than or equal to maximum
 if 'fSCAU.oacmax.isNull(), X > fSCAU.oacmax do Runtime.setErrMSG("SCAU", 1737) quit

 quit

VP11(RecordSCAU fSCAU) //
 /*
 ---- Revision History ------------------------------------------------

  03/31/05 - SmithCD - CR 13782
             Modified setErrMSG method calls to pass table name as first
             parameter to prevent error.

  02/01/05 - SmithCD - CR 13661
	     Modified to comply with current standards.

  12/08/02 - SRIVASTAVAN - ARQ.49451
      Changed $P(fSCAU,"|",19) to object.col notation
 
  12/07/99 - KONGJ - 34971
      Changed the check on the UID field from '$P(fSCAU,"|",19) to
      $P(fSCAU,"|",19)="" to allow non-numeric data format for UID.

 ----------------------------------------------------------------------
 */

 type public Boolean X

 if 'X quit 

 /*
 If there is no retry teller, or no maximum to retry, do not allow
 same day retries.
 
 If this is a retry teller (the teller and the retry teller are the same),
 do not allow same day retries.
 */
 
 // Invalid, Same Day Retry requires Retry Teller.
 if fSCAU.rtuid.isNull() do Runtime.setErrMSG("SCAU", 1526) quit
 
 // Invalid, Same Day Retry requires Maximum Retries.
 if 'fSCAU.marty do Runtime.setErrMSG("SCAU", 1525) quit
 
 // Retry Tellers cannot use Same Day Retry
 if fSCAU.rtuid = UID do Runtime.setErrMSG("SCAU", 2418) quit
 
 // Same Day Retry cannot use Overdraft Protection
 if fSCAU.odp do Runtime.setErrMSG("SCAU", 1524) quit

 quit
VP12(RecordSCAU fSCAU) //
 /* Revision History

   03/31/05 - SmithCD - CR 13782
              Modified setErrMSG method calls to pass table name as first
              parameter to prevent error.

 */

 type public Number X

 // Num of o/d retries invalid. O/D protection not established.
 if fSCAU.odp '= 2, 'X.isNull() do Runtime.setErrMSG("SCAU", 2159) quit

 // Num of o/d retries must be less than or equal to the maximum retries allowed
 if fSCAU.marty < X do Runtime.setErrMSG("SCAU", 2155) quit

 // Data required
 if fSCAU.odp = 2, X.isNull() do Runtime.setErrMSG("SCAU", 741) quit

 quit
	#ACCEPT DATE=11/05/03; PGM=Screen Compiler;CR=UNKNOWN;GROUP=DEAD
	quit								// User defined post processor's


VRV(V,L) quit V_$J("",L-$L(V))
VREPRNT
 type Public RecordSCAU fSCAU
 do VPR(.fSCAU)
 do VDA1(.fSCAU)
 do ^DBSPNT()
 quit

VW(RecordSCAU fSCAU)
 do VDA1(.fSCAU)
 do ^DBSPNT(10)
 quit

VDAPNT(RecordSCAU fSCAU)
 do VDA1(.fSCAU)
 do ^DBSPNT(0,2)
 quit

VDA
 type Public RecordSCAU fSCAU
 do VDA1(.fSCAU)
 quit

	#ACCEPT DATE=11/05/03; PGM=Screen Compiler;CR=UNKNOWN;GROUP=DEAD
	quit
 
vSET(sn,di,X)
 type Public RecordSCAU fSCAU
 if sn="SCAU" do vSET1(.fSCAU,di,X)
 #ACCEPT Date=11/5/03;PGM=Screen Compiler;CR=UNKNOWN;GROUP=SYNTAX
 quit
vSET1(RecordSCAU fSCAU,di,X)
 do fSCAU.setAuditFlag(1)
 set fSCAU.@di=X
 #ACCEPT Date=11/5/03;PGM=Screen Compiler;CR=UNKNOWN;GROUP=SYNTAX
 quit
	
	#ACCEPT DATE=11/05/03; PGM=Screen Compiler;CR=UNKNOWN;GROUP=DEAD
	quit
vREAD(fid,di)
 type Public RecordSCAU fSCAU
 if fid="SCAU" quit $$vREAD1(.fSCAU,di)
 quit ""
vREAD1(RecordSCAU fSCAU,di)
 quit fSCAU.@di
	#ACCEPT DATE=11/05/03; PGM=Screen Compiler;CR=UNKNOWN;GROUP=DEAD
	quit
