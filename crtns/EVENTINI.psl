EVENTINI		/*
	ORIG: MATTSON - 06/02/2000
	DESC: Initialize EVENTSAVAIL

	---- Comments --------------------------------------------------------

	---- Revision History ------------------------------------------------
	
	01/08/05 - RussellDS - CR13817
		   Changed order of processing in INIT section to avoid
		   referential integrity error with filer.
		   
		   PSL clean-up.
		   
		   Removed old revision history.
	*/

	//--------------------------------------------------------------------
	//Initialize EVENTAVAIL
	//--------------------------------------------------------------------
 
	do Db.fastDelete("EVENTSAVAIL")
	do Db.fastDelete("EVENTACTIONS")
	do Db.fastDelete("EVENTTESTS")
	do Db.fastDelete("EVENTARGDEFS")

	do TESTS	// Event Tests
	do ARGS		// Event Arguments
	do EVENTS	// Events Available and Actions

	quit


	//--------------------------------------------------------------------
EVENTS	//Available Events
	//--------------------------------------------------------------------
	
	type Boolean IS2HIST, ONCEADAY, ONCEONLY
	type Number ATTIME, EVENTID, INTERVAL, TEST, TOTIME
	type String ACTN, DESC, FREQ, TYPE

	set EVENTID=1 do {
		set DESC="Check Re-Order"
		set TYPE="T"
		set TEST=2
		set ACTN="PROC001^EVENTA1"

		set FREQ=""
		set ATTIME=""
		set TOTIME=""
		set INTERVAL=""

		set IS2HIST=0
		set ONCEONLY=1
		set ONCEADAY=0

		do avl
		do act
		}

	set EVENTID=2 do {
		set DESC="Cleared Checks"
		set TYPE="T"
		set TEST=2
		set ACTN="PROC001^EVENTA1"

		set FREQ=""
		set ATTIME=""
		set TOTIME=""
		set INTERVAL=""

		set IS2HIST=0
		set ONCEONLY=1
		set ONCEADAY=0

		do avl
		do act
		}

	set EVENTID=3 do {
		set DESC="Cross Balance Threshhold"
		set TYPE="T"
		set TEST=2
		set ACTN="PROC001^EVENTA1"

		set FREQ=""
		set ATTIME=""
		set TOTIME=""
		set INTERVAL=""

		set IS2HIST=0
		set ONCEONLY=0
		set ONCEADAY=0

		do avl
		do act
		}

	set EVENTID=4 do {
		set DESC="Direct Deposit"
		set TYPE="T"
		set TEST=2
		set ACTN="PROC001^EVENTA1"

		set FREQ=""
		set ATTIME=""
		set TOTIME=""
		set INTERVAL=""

		set IS2HIST=0
		set ONCEONLY=0
		set ONCEADAY=0

		do avl
		do act
		}

	set EVENTID=5 do {
		set DESC="Regular Deposit"
		set TYPE="T"
		set TEST=2
		set ACTN="PROC001^EVENTA1"

		set FREQ=""
		set ATTIME=""
		set TOTIME=""
		set INTERVAL=""

		set IS2HIST=0
		set ONCEONLY=0
		set ONCEADAY=0

		do avl
		do act
		}

	set EVENTID=6 do {
		set DESC="Overdraft Alert"
		set TYPE="T"
		set TEST=2
		set ACTN="PROC001^EVENTA1"

		set FREQ=""
		set ATTIME=""
		set TOTIME=""
		set INTERVAL=""

		set IS2HIST=0
		set ONCEONLY=0
		set ONCEADAY=0

		do avl
		do act
		}

	set EVENTID=7 do {
		set DESC="Returned Item(s)"
		set TYPE="F"
		set TEST=5
		set ACTN="PROC001^EVENTA1"

		set FREQ="1DA"
		set ATTIME=0
		set TOTIME=""
		set INTERVAL=""

		set IS2HIST=0
		set ONCEONLY=0
		set ONCEADAY=1

		do avl
		do act
		}

	set EVENTID=8 do {
		set DESC="Exceeds ATM Rebate Count"
		set TYPE="T"
		set TEST=3
		set ACTN="PROC001^EVENTA1"

		set FREQ=""
		set ATTIME=""
		set TOTIME=""
		set INTERVAL=""

		set IS2HIST=0
		set ONCEONLY=0
		set ONCEADAY=0

		do avl
		do act
		}

	set EVENTID=9 do {
		set DESC="Debit Card Usage"
		set TYPE="T"
		set TEST=4
		set ACTN="PROC001^EVENTA1"

		set FREQ=""
		set ATTIME=""
		set TOTIME=""
		set INTERVAL=""

		set IS2HIST=0
		set ONCEONLY=0
		set ONCEADAY=0

		do avl
		do act
		}


	set EVENTID=10 do {
		set DESC="CD Maturity"
		set TYPE="F"
		set TEST=6
		set ACTN="PROC001^EVENTA1"

		set FREQ="1DA"
		set ATTIME=0
		set TOTIME=""
		set INTERVAL=""
		set IS2HIST=0
		set ONCEADAY=0
		set ONCEONLY=0

		do avl
		do act
		}

	quit


	//--------------------------------------------------------------------
TESTS	//Event Tests
	//--------------------------------------------------------------------
	
	type Boolean ISSYS
	type Number TEST
	type String DESC, PROC

	set TEST=0 do {
		set DESC="Return False"
		set PROC="$$TEST000^EVENTT1"
		set ISSYS=0

		do tst
		}

	set TEST=1 do {
		set DESC="Return True"
		set PROC="$$TEST001^EVENTT1"
		set ISSYS=0

		do tst
		}

	set TEST=2 do {
		set DESC="Select Transaction"
		set PROC="$$TEST002^EVENTT1"
		set ISSYS=0

		do tst
		}

	set TEST=3 do {
		set DESC="Exceeds ATM Rebate Count"
		set PROC="$$TEST003^EVENTT1"
		set ISSYS=0

		do tst
		}

	set TEST=4 do {
		set DESC="Exceeds Debit Card Usage"
		set PROC="$$TEST004^EVENTT1"
		set ISSYS=0

		do tst
		}

	set TEST=5 do {
		set DESC="Returned Item(s)"
		set PROC="$$TEST005^EVENTT1"
		set ISSYS=0

		do tst
		}

	set TEST=6 do {
		set DESC="CD Maturity"
		set PROC="$$TEST006^EVENTT1"
		set ISSYS=0

		do tst
		}

	quit
 
 
	//--------------------------------------------------------------------
ARGS	// Event Arguments Definitions
	//--------------------------------------------------------------------

	type Number TEST
	type String ARG, DESC

	set TEST=2 do {
		set ARG=1
		set DESC="Check Number or Range"
		do arg

		set ARG=2
		set DESC="Transation Codes"
		do arg

		set ARG=3
		set DESC="Transaction Amount or Range"
		do arg

		set ARG=4
		set DESC="Minimum/Maximum Balance threshold"
		do arg
		}
	
	set TEST=3 do {
		set ARG=1
		set DESC="Transaction Codes"
		do arg

		set ARG=2
		set DESC="Number of ATM transactions"
		do arg
		}

	set TEST=4 do {
		set ARG=1
		set DESC="Transaction Codes"
		do arg

		set ARG=2
		set DESC="Number of Debit Card transactions"
		do arg
		}

	quit
	//--------------------------------------------------------------------
avl	// Available Events
	//--------------------------------------------------------------------
	
	type public Boolean IS2HIST, ONCEADAY, ONCEONLY
	type public Number ATTIME, EVENTID, INTERVAL, TEST, TOTIME
	type public String ACTN, DESC, FREQ, TYPE
	
	type RecordEVENTSAVAIL eventavl = Class.new("RecordEVENTSAVAIL")
 
	set eventavl.eventid=EVENTID
	set eventavl.description=DESC
	set eventavl.processor="PA"
	set eventavl.eventtype=TYPE
	set eventavl.entitytestid=TEST

	set eventavl.frequency=FREQ
	set eventavl.attime=ATTIME
	set eventavl.totime=TOTIME
	set eventavl.interval=INTERVAL

	set eventavl.istohistory=IS2HIST
	set eventavl.isonlyonce=ONCEONLY
	set eventavl.isonceperday=ONCEADAY
	set eventavl.entity="A"

	do eventavl.save()
	quit
  
 
	//--------------------------------------------------------------------
act	// Event Actions
	//--------------------------------------------------------------------
	
	type public Number EVENTID
	type public String ACTN
 
	type RecordEVENTACTIONS eventact = Class.new("RecordEVENTACTIONS")
 
	set eventact.eventid=EVENTID
	set eventact.sequence=1
	set eventact.procedure=ACTN
	set eventact.correspondid=""
	set eventact.actionqueue="SCA_EVENTS"
	set eventact.processor="PA"
 
	do eventact.save()
	quit


	//--------------------------------------------------------------------
tst	// Event Tests
	//--------------------------------------------------------------------
 
 	type public Number TEST
 	type public String DESC, PROC
 
	type RecordEVENTTESTS eventtst = Class.new("RecordEVENTTESTS")

	set eventtst.testid=TEST
	set eventtst.description=DESC
	set eventtst.procedure=PROC
	set eventtst.issystemtest=0
 
	do eventtst.save()
	quit
 
 
	//--------------------------------------------------------------------
arg	// event argument test
	//--------------------------------------------------------------------
	
	type public Number TEST
	type public String ARG, DESC
 
	type RecordEVENTARGDEFS eventarg = Class.new("RecordEVENTARGDEFS")
 
	set eventarg.testid=TEST
	set eventarg.argumentnum=ARG
	set eventarg.description=DESC
 
	do eventarg.save()
	quit
 #OPTION ResultClass ON
Public String vSIG()	quit "59920^50003^Dan Russell^7126"	// Signature - LTD^TIME^USER^SIZE
