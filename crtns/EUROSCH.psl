EUROSCH(Number CID)			// Account Number

	/*
	ORIG: KumarSS - 11/30/2005
	DESC: Euro Rate Schedule Conversion.

	---- Comments --------------------------------------------------------
	
	---- Revision History ------------------------------------------------
	
	05/15/06 - RussellDS - CR21296
		   Replace references to %CACHE, which is reserved for PSL
		   record objects, with cache array.

	11/30/05 - KumarSS - 16668
		   Converted to PSL.
		   Removed revision history prior to 2004
		   
	----------------------------------------------------------------------

	*/

	quit


	//----------------------------------------------------------------------
public EXEC(Number CID)			// Account Number
	//----------------------------------------------------------------------

	// Convert rate schedule for an account.

	type public String cache(,)

	// Original rate schedule
	type RecordACN acn=Db.getRecord("ACN","CID=:CID")

	if acn.cls="D" do {

		type RecordDEP dep=Db.getRecord("DEP","CID=:CID")

		set dep.orgsch=dep.sch

		if cache("EURSCH",dep.sch).get().piece("|",1)'="" set dep.sch=cache("EURSCH",dep.sch).piece("|",1)

		do dep.save()
	}
	else  if acn.cls="L" do {

		type RecordLN ln=Db.getRecord("LN","CID=:CID")

		set ln.orgsch=ln.sch

		if cache("EURSCH",ln.sch).get().piece("|",1)'="" set ln.sch=cache("EURSCH",ln.sch).piece("|",1)

		do ln.save()
	}

	quit


	//----------------------------------------------------------------------
public EURRSCH(Number CID)			// Account Number
	//----------------------------------------------------------------------

	// On reversal swap back in original

	type RecordACN acn=Db.getRecord("ACN","CID=:CID")

	if acn.cls="D" do {

		type RecordDEP dep=Db.getRecord("DEP","CID=:CID")

		set dep.sch=dep.orgsch
		set dep.orgsch=""

		do dep.save()
		}
	else  if acn.cls="L" do {

		type RecordLN ln=Db.getRecord("LN","CID=:CID")

		set ln.sch=ln.orgsch
		set ln.orgsch=""

		do ln.save()
		}

	quit
 #OPTION ResultClass ON
Public String vSIG()	quit "60401^67461^Dan Russell^1823"	// Signature - LTD^TIME^USER^SIZE
