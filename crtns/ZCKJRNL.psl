ZCKJRNL	
	/*
	 ORIG: JEFF - 02/16/2007
	 DESC: 
	
	 ---- Comments --------------------------------------------------------
	
	 ---- Revision History ------------------------------------------------
	
	 ****** Consider using setAuditFlag for all objects in this procedure
	   example :do dep.setAuditFlag(1)
	
	*/

	quit

CK(RecordTTX ttx)	//

	type Date ZPTJD
	type String AUTH,CK,ECID,ROUTING,TSO,XTSO
	type String ZAB,ZCP,ZEXD,ZPCID,ZPMD,ZSCN,ZTRN
	type RecordZCKJRNL zckjrnl

	set TSO=ttx.tso
	do OUT^UTSO(.XTSO,TSO)
	
	set ECID=XTSO("ZDEP").get()
	set ZCK=XTSO("ZCK").get()
	set ZSC=XTSO("ZSC").get()
	set ZPMD=XTSO("ZPMD").get()
	set ZTRN=XTSO("ZTRN").get()
	set ZCP=XTSO("ZCP").get()
	set ZAB=XTSO("ZAB").get()
	set ZEXD=XTSO("ZEXD").get()
	set ZPCID=XTSO("ZPCID").get()
	set ZPTJD=ttx.tjd
	if ZPTJD="" set ZPTJD=TPD.get()	

	set AUTH=ZSC_ZPMD
	set ROUTING=ZTRN_ZCP_ZAB_ZEXD
	

	set zckjrnl=Class.new("RecordZCKJRNL")

	set zckjrnl.ptjd=ZPTJD
	set zckjrnl.seq=Db.nextVal("ZCKJRNL",":ZPTJD")
		
	set zckjrnl.amt=ttx.tot
	set zckjrnl.pcid=ZPCID
	set zckjrnl.ecid=ECID
	set zckjrnl.auth=AUTH
	set zckjrnl.routing=ROUTING
	set zckjrnl.chknum=ZCK
	set zckjrnl.brcd=BRCD.get()
	set zckjrnl.uid=%UserID
	set zckjrnl.time=%CurrentTime
	
		
	do zckjrnl.bypassSave()

	quit

EC(RecordTTX ttx)

	type Date ZPTJD
        type String AUTH,CK,ECID,ROUTING,TSO,XTSO,ZAB,ZCP,ZEXD,ZPMD,ZSCN,ZTRN
        type RecordZCKJRNL zckjrnl
 
        set TSO=ttx.tso
        do OUT^UTSO(.XTSO,TSO)
 
        set ECID=XTSO("ZDEP").get()
        set ZCK=XTSO("ZCK").get()
        set ZSC=XTSO("ZSC").get()
        set ZPMD=XTSO("ZPMD").get()
        set ZTRN=XTSO("ZTRN").get()
	set ZCP=XTSO("ZCP").get()
        set ZAB=XTSO("ZAB").get()
        set ZEXD=XTSO("ZEXD").get()
        set ZPTJD=ttx.tjd
        if ZPTJD="" set ZPTJD=TPD.get()
 
        set AUTH=ZSC_ZPMD
        set ROUTING=ZTRN_ZCP_ZAB_ZEXD

	do Db.delete("ZCKJRNL","ECID=:ECID AND PTJD=:ZPTJD AND AUTH=:AUTH AND ROUTING=:ROUTING AND CHKNUM=:ZCK")

	quit
 #OPTION ResultClass ON
Public String vSIG()	quit "60822^49391^Jeff Walton^1902"	// Signature - LTD^TIME^USER^SIZE
