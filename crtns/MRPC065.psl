MRPC065(return,versn,ACN,GRP,CUSTYPE)	//Public;MRPC call for accounts linked to customers product type
	/*
	   ORIG: DOUGHERTYE - 09/26/97
	   DESC: MRPC call for accounts linked to customers product type

	   KEYWORDS:

	   ARGUMENTS:
	  	 . RETURN        Account Information  /TYP=T/REQ/MECH=VAL

	  	 . VERSN  MRPC Version Number  /TYP=T/REQ/MECH=VAL

	  	 . ACN     Customerr Account #  /TYP=T/REQ/MECH=VAL

		 . GRP    Product Group   /TYP=T/REQ/MECH=VAL

	         . TYPE          Product Type
	   INPUTS:
	  	 . System

	  	 . Data [ddfile]di

	  	 . v1 desc of variable /TYP=T

	   RETURNS:
	  	 . XX desc of return  /TYP=T

	   RELATED:
	  	 . $$func^rtn - description of how related

	   EXAMPLE:
	  	 Text of example (line one)


	---- Revision History ------------------------------------------------

	11/04/05 - KumarSS - CR 16667
		   TYPELIM column is included into the WHERE clause, while 
		   selecting data from CIFTYPELIM table, to avoid the Accounts 
		   are being listed twice in the Customer Limits Accounts 
		   Breakdown (PFW) report.
	
	12/12/03 - CARROLLJ - CR7239
		   Added #ACCEPT before setting %SystemCurrency to correct
		   compile errors.

		 11/04/2002 - Srivastavan - 49794
                 Converted to PSL

	*/

	type public String LIMTYPE(,,)
	type Number CID,SAVACN,SAVTYPE,Y
	type String CRLF,SAVGRP,STR,SYS,TMPTYPE(),X

	// Version number of client message is not compatible with server
	if versn.get()'=1 quit $$ERRMSG^PBSUTL($$^MSG(2951))

	// Retrieve Calculated Data
	type RecordCUVAR cuvar=Db.getRecord("CUVAR")
	#ACCEPT DATE=12/12/03;PGM=John Carroll

	set %SystemCurrency=cuvar.%crcd
	set %ProcessMode=0 	// Needs to call array from ^PROCLIM not an insert
	set SAVGRP=GRP,SAVACN=ACN,SAVTYPE=CUSTYPE

	set X=$$ACCUM^PROCLIM(ACN)
	set GRP=SAVGRP

	if ACN.get()="" set ACN=SAVACN
	if CUSTYPE.get()="" set CUSTYPE=SAVTYPE

	// Create formatted output string
	set CRLF=$CHAR(13)_$CHAR(10)

	// Get data associated with a particular group
	set Y=0
	set (CID,SYS)=""

	type ResultSet rs=Db.select("SYS","CIFTYPELIM","ACN=:ACN AND GRPLIM=:SAVGRP AND TYPELIM=:CUSTYPE","SYS")

	while rs.next() set SYS=rs.getCol(1) do { 

		for  set CID=LIMTYPE(SYS,CUSTYPE,CID).order() quit:CID=""  do {

			set TMPTYPE(Y).piece($CHAR(9),1)=CID
			set TMPTYPE(Y).piece($CHAR(9),2)=LIMTYPE(SYS,CUSTYPE,CID).get().piece("|",1)
			set TMPTYPE(Y).piece($CHAR(9),3)=LIMTYPE(SYS,CUSTYPE,CID).get().piece("|",2)
			set TMPTYPE(Y).piece($CHAR(9),4)=LIMTYPE(SYS,CUSTYPE,CID).get().piece("|",3)
			set TMPTYPE(Y).piece($CHAR(9),5)=LIMTYPE(SYS,CUSTYPE,CID).get().piece("|",4)
			set TMPTYPE(Y).piece($CHAR(9),6)=LIMTYPE(SYS,CUSTYPE,CID).get().piece("|",5)

			set Y=Y+1
			}
		}

	// Set up the string
	set Y=""
	set STR=""

	for  set Y=TMPTYPE(Y).order() quit:Y=""  do {

		set STR=STR_TMPTYPE(Y)_CRLF
		}

	set return=$$V2LV^MSG(STR)

	quit ""		
 #OPTION ResultClass ON
Public String vSIG()	quit "60211^10494^Sudanthiran S. Kumar^2655"	// Signature - LTD^TIME^USER^SIZE
