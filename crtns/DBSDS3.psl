DBSDS3	/* Public - Screen Definition List
	ORIG: CHIANG - 1/1/85
	PROCEDURE ID: DBSDS3
	DESC: DATA-QWIK Screen Definition List
	
	---- Comments --------------------------------------------------------

	------ Revision History ------------------------------------------------

        07/26/05 - SkariahV- CR16679
                   Removed #WARN and #OPTIMIZE directives.

	09/28/04 - RussellDS - CR12334
		   Replaced obsoleted calls to ^DBSANS with new procedure
		   DBSGETID.

	01/28/03 - Dan Russell - 51351
		   Moved into PSL.  Removed old change history.

	------------------------------------------------------------------------

	I18N=QUIT Excluded from I18N standards
	*/

	type Public Number ER=0
	type Public String RM

	type Number CNT,TEMP,VRWOPT()
	type String IO,PGM,PGMLNK,RID
	
	quit:'$$LIST^DBSGETID("DBTBL2", "List", .IO)

	set RID="DBSSCRLSTLNK"
	do ^URID quit:PGM.get()=""
	set PGMLNK=PGM

	set RID="DBSSCRLST"
	do ^URID quit:PGM.get()=""

	do OPEN^SCAIO quit:ER

	type ResultSet tmpdqrs=Db.select("ELEMENT","TMPDQ","PID=:%ProcessID")

	set CNT=0
        while tmpdqrs.next() do { quit:ER
		type String SID,vudwhere

		// If interactive, prompt to continue
		if CNT,IO=$P do { quit:ER
			type String MSG

			set MSG=""
			if $$^DBSMBAR(161)'=1 set ER=1,RM=""
			}

		set SID=tmpdqrs.getCol("ELEMENT")
		set VRWOPT("NOOPEN")=1
		set VRWOPT("NOCLOSE")=1

		type RecordDBTBL2 dbtbl2=Db.getRecord("DBTBL2","LIBS=""SYSDEV"",SID=:SID")

		if dbtbl2.lnk1="" do {		// Not linked screen
			set vudwhere="LIBS='SYSDEV' AND SID=:SID AND SEQ>0"
			do @("V0^"_PGM)
			}

		else  do {			// Linked screen
			set vudwhere="LIBS='SYSDEV' AND SID=:SID"
			do @("V0^"_PGMLNK)
			}

		set CNT=CNT+1
		}

	do CLOSE^SCAIO
	
	do Db.delete("TMPDQ","PID=:%ProcessID")

	quit
 #OPTION ResultClass ON
Public String vSIG()	quit "60107^27443^Viji Skariah^1654"	// Signature - LTD^TIME^USER^SIZE
