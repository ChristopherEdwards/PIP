LNHS1 ; Procedure LNHS1 - History Support Status
 ;;Copyright(c)2005 Sanchez Computer Associates, Inc.  All Rights Reserved - 08/09/05 10:33 - spatola
 ;
 ; **** This is a DATA-QWIK generated routine (level 25) ****
 ;
 /*
    ORIG: GRAY - 01/17/2000
    DESC: History Support Status
    
    ---- Comments --------------------------------------------------------
    
    ---- Revision History ------------------------------------------------
   

	12/21/99 - GRAY - 32507
		   Removed code no longer needed due to the Elimination
		   of Teller/Branch Character Interface and placed remaining 
		   code into PSL'd procedure definition.
 */
	
	quit
	
	
Public VPG00A	// Verify that sequence selected is a credit transaction
	
	new AR,DATA,ET,ITC,MSG1,MSG2,PCF,REC,TSO,UTSO,Z
	set ET=""
	if X="" quit
	
	set DATA=Db.getOneRow("ETC,ITC,TSO","HIST","CID,X",124)
	if DATA="" set ET="INVLDSQ" do ERR quit
	
	set Z=$P(DATA,"|",1) if '$L(Z) do VPG00C quit
	
	new PCF
	set PCF=Db.getOneRow("PCF","TRN","Z")
	if '$E(PCF,9) do VPG00C quit
	
	/* 
	If the requested transaction is a reversed or error corrected
	return a message referring to the correct transaction.
	*/
	
	set ITC=$P(DATA,"|",2)
	set TSO=$P(DATA,"|",3)
	
	if $E(ITC,6)!($E(ITC,12)),'Db.isDefined("HISTR","CID,X") do {
		set MSG1=$S($E(ITC,6):$$^MSG(6560),1:$$^MSG(846))
		do OUT^UTSO(.UTSO,TSO)
		set MSG2=UTSO("REV")
		set ET="ECREV"
		}
	
 	if ET'="" do ERR quit
	
	do HISTL^UHFETCH(CID,X,.AR,"SB")
	set REC=$G(AR(1))
	if REC="" set ET="PSFINC" do ERR quit
	quit
	
VPG00C	//
	set ET="LNHS1" do ERR
	quit
	
ERR	//
	set ER=1 do DSPBP^UTLERR
	set VFMQ="Q"
	quit

vSIG()	quit "59886^43535^Sanchez SCM Administrator^1337"	// Signature - LTD^TIME^USER^SIZE
