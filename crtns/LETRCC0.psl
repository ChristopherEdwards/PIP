LETRCC0	 /*
   ORIG: BURNSM - 09/13/2000
   DESC: Funds Availability Letters

   ---- Comments --------------------------------------------------------

   ---- Revision History ------------------------------------------------

	01/30/06 Radhika - CR 17423
		 .Eliminated PSL deprecated features and warnings.
		 .Removed revision history prior to 2004.

 */

	type public String %FN
	type Date FORMTJD
	type Number DAY
	type String SAVFN,XFORM,XFID,XTJD(),zz
	
	set XFID="DAYENDRCC0"
	set SAVFN=%FN
	type ResultSet rs=Db.select("FORM","STBLFORMBCH","FID=:XFID")
	if rs.isEmpty() quit
	while rs.next() do {
		set XFORM=rs.getCol("FORM")

		type ResultSet rs1=Db.select("TJDVAL","UTBLFORMVAR","FORM=:XFORM")
		if rs1.isEmpty() quit
		while rs1.next() do {
			set XTJD=rs1.getCol("TJDVAL")
			set XTJD(XTJD)=""
			}
		}

	set zz=""
	for  set zz=XTJD(zz).order() quit:zz.isNull()  do {
		set DAY=zz.piece("T",2)
		set FORMTJD=%SystemDate+DAY
		set %FN=SAVFN_"_"_zz
		do DRV^UBCHID("BCHLETRCC0")
		}

	quit
 #OPTION ResultClass ON
Public String vSIG()	quit "60295^31056^Radhika Panchanathan^949"	// Signature - LTD^TIME^USER^SIZE
