MRPC031(RETURN,VERSN,ACN,RPASEQ,PLAN)	//Public;MRPC call for Minimum Annual Distriubtion Modeler (RPA006)
	/*
	   DESC: Minimum Annual Distribution Modeler
	   KEYWORDS: RPC

	   ARGUMENTS:
	         . RETURN        Minimum Annual Distribution.	/TYP=T/REQ/MECH=REFNAM:W

	         . VERSN         ^MRPC031 version number	/TYP=N/REQ/MECH=VAL
	                         current version=1

	         . ACN           Customer Number		/TYP=N/REQ/MECH=VAL

	         . RPASEQ        RPA Sequence Number		/TYP=N/REQ/MECH=VAL

	   . PLAN          Jan 1 Plan Value			/TYP=N/REQ/MECH=VAL

	   RETURNS:
	         . $$    Error Message				/TYP=T
	                 Null= No Error

	   RELATED:
	         . $$^PBSMRPC - MRPC Service Class Driver

	   EXAMPLE:
	         set RM=$$^MRPC031(.VAL,1,ACN,RPASEQ,PLAN)
	-----  Revision History -----------------------------------------------

	11/14/02 - ZWITKOWITSM - 43583
		   Convert to PSL.

	*/

	new ET,IAR,LIVE,MODELER,Q,RSPTYP,SWITCH

	set (IAR,LIVE,%ProcessMode,SWITCH)=0

	// Version number of client message is not compatible with server
	if $G(VERSN)'=1 quit $$ERRMSG^PBSUTL($$^MSG(2951))

	type RecordCIF cif=Db.getRecord("CIF","ACN",1)

	// Invalid customer number
	if cif.getMode()=0 quit $$ERRMSG^PBSUTL($$^MSG(1295))

	// Verify RPASEQ
	set X=$G(RPASEQ)
	do RSPPP^RSPMADA
	if ER quit $$ERRMSG^PBSUTL(RM)

	// Verify PLAN
	if PLAN'="" set MODELER=1

	do EXEC^RSPMADA(.cif)
	if ER quit $$ERRMSG^PBSUTL(RM)

	// Create formatted output string
	set TAB=$C(9)
	set CRLF=$C(13,10)
	set STR=""
	// IRATYP,NAM,TAXID,PLANID,PLANMAN,MADAMT,RSPMAD0,RSPMADB,PVMAD,DOB
	// MADSDOB,AUTUPD,AUTAMT,AUTFRE,AUTDND,MADSAT,ORIGMAD,MAXLIF,MAXAUT,MAXLIFP
	set STR=STR_$TR(X,"|",TAB)_CRLF
	set RETURN=$$V2LV^MSG(STR)

	quit ""

vSIG()	quit "59886^43583^Sanchez SCM Administrator^1579"	// Signature - LTD^TIME^USER^SIZE
