SWTRANSL	//; Character Translation Routine
	/*

	    ORIG: Rachel Yang 3/16/94   Proj IB00002

	   DESC: Update or display character translation table.
	         o Load local array from user table UTBLSWCHTR.
	         o Call screen to present the array's character contents.
	         o File local array (may have updated data)back to
	           user table UTBLSWCHTR.
	  ---- Revision History -------------------------------------------------
	
	   09/26/05 - KUMARB - CR 17050
	   	      Modified section SCREEN for DRV^USID call to pass
	   	      CHARRAY as the 3rd param. Modified CHARRAY to UTBLSWCHTR
	   	      array object.
	   
	   10/01/02 - TELIV - 49451
		      Converting to PSL
	  ----------------------------------------------------------------------

	*/
	do UPD quit

UPD	//
	set %ProcessMode=1

	/*
	  Load local array from user table UTBLSWCHTR
	  UTBL("TRANSLATE",SEQ)=CH1|TR1|CH2|TR2|CH3|TR3|CH4|TR4|CH5|TR5|
	  SEQ is a sequential number beginning with 1 and the data items
	  CHn and TRn are pairs of characters and their translations
	*/

	type Number i
	
	set i=0
	type RecordUTBLSWCHTR fUTBLSWC()
	type DbSet ds=Db.selectDbSet("UTBLSWCHTR")
	while ds.next() do {
		set i=i+1
		set fUTBLSWC(i)=ds.getRecord("UTBLSWCHTR")
		}
	
	if i=0 set fUTBLSWC(1)=Class.new("RecordUTBLSWCHTR")
	
	do SCREEN(.fUTBLSWC())
	
	quit

SCREEN(RecordUTBLSWCHTR fUTBLSWC())	// Call screen to present the contents of the array.
	
	type public String VFMQ	
	
	do DRV^USID(%ProcessMode,"UTBLSWCHTR",.fUTBLSWC())
	if VFMQ["Q" quit
	
	do TOUTBL(.fUTBLSWC())

	quit


TOUTBL(RecordUTBLSWCHTR fUTBLSWC())	// File local Array CHARRAY(I) back to UTBLSWCHTR file definiton

	// kill data from table, the replace it with contents of CHARRAY
	do Db.fastDelete("UTBLSWCHTR")
	
	type Number i
	
	set i=""
	for  set i=fUTBLSWC(i).order() quit:i.isNull()  do fUTBLSWC(i).save()

	quit
 #OPTION ResultClass ON
Public String vSIG()	quit "60178^83199^Balasubramonian Sankar^1760"	// Signature - LTD^TIME^USER^SIZE
