DEPFIL3 // DEP DATA-QWIK filer, part (5)
 // Copyright(c)2007 Sanchez Computer Associates, Inc.  All Rights Reserved - 06/01/2007 01:32 - lc7022

	quit		// Not called from top


public VINDEX(RecordDEP dep) // Update index entries

		type Public String vx()

	if %ProcessMode=1 do { quit
		type String vf,vi,viMap,vxn
		set viMap=",CONVACN,~1~|,ANLLED,~2~|,ANLCID,~3~|,ANLOFFED,~4~|,AREF,~5~|,AWTI,~6~|,BGTRVUDT,~7~|,BGTYRND,~8~|,COLEXTRDYS,~9~|,CTFGRP,~10~|,LAFTFR,~11~|,SCHDEPND,~12~|,FEEPLN,~13~|,DTC,CLS,GRP,TYPE,~14~|,EMPLNO,ACN,TYPE,~15~|,TYPE,EMPLNO,ACN,~16~|,,~17~|,NSDATE,~18~|,AIINDEX,~19~|,INDEX,~20~|,ITRF,~21~|,INTMAT,~22~|,AIINTMAT,~23~|,MDT,~24~|,MLD,~25~|,OID,~26~|,RACN,~27~|,BGTNCDT,~28~|,SCND,~29~|,SVCFEECID,~30"
		set viMap=viMap_"~|,,~31~|,TREXD,~32~|,UPNDT,~33~|,CLS,ACN,~34~|,BOO,~35~|,CC,CLS,GRP,TYPE,~36~|,CLS,GRP,TYPE,~37~|,CLS,~38~|,CLS,GRP,TYPE,CRCD,~39~|,IRA,~40~|,CORRE,CRCD,~41~|,COMMFPER,~42~|,ACN,RPASEQ,~43~|,CLS,BOO,PROVCAT,TYPE,~44~|,ACN,RPASEQ,~45~|,PBKSN,~46~|,,~47~|"
		set vf=0
		set vxn=""
		for  set vxn=vx(vxn).order() quit:vxn=""  do {
			for  set vf=$F(viMap,(","_vxn_","),vf) quit:vf=0  do {
				set vi=viMap.extract(vf,999).piece("~",2)
				set viMap.piece("|",vi)=""
				do @("vi"_vi_"(.dep)")
			}
		}
	}
	do vi1(.dep)
	do vi2(.dep)
	do vi3(.dep)
	do vi4(.dep)
	do vi5(.dep)
	do vi6(.dep)
	do vi7(.dep)
	do vi8(.dep)
	do vi9(.dep)
	do vi10(.dep)
	do vi11(.dep)
	do vi12(.dep)
	do vi13(.dep)
	do vi14(.dep)
	do vi15(.dep)
	do vi16(.dep)
	do vi17(.dep)
	do vi18(.dep)
	do vi19(.dep)
	do vi20(.dep)
	do vi21(.dep)
	do vi22(.dep)
	do vi23(.dep)
	do vi24(.dep)
	do vi25(.dep)
	do vi26(.dep)
	do vi27(.dep)
	do vi28(.dep)
	do vi29(.dep)
	do vi30(.dep)
	do vi31(.dep)
	do vi32(.dep)
	do vi33(.dep)
	do vi34(.dep)
	do vi35(.dep)
	do vi36(.dep)
	do vi37(.dep)
	do vi38(.dep)
	do vi39(.dep)
	do vi40(.dep)
	do vi41(.dep)
	do vi42(.dep)
	do vi43(.dep)
	do vi44(.dep)
	do vi45(.dep)
	do vi46(.dep)
	do vi47(.dep)

	quit
	

vi1(RecordDEP dep) // Maintain ACONVACN index entries (Converted Account/Account)

	type Public String vx()
	type Boolean vdelete = 0
	type String v1 = dep.convacn
	if v1.isNull() set v1=(PSL.maxCharValue-1).char()
	type String v2 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^XCONVACN(v1,v2)) do vidxerr("ACONVACN")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^XCONVACN(v1,v2)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("CONVACN").exists() set v1=vx("CONVACN").piece("|",1) set:v1.isNull() v1=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^XCONVACN(v1,v2)
	quit

vi2(RecordDEP dep) // Maintain ANLLED index entries (Net Loss End Date)

	type Public String vx()
	type Boolean vdelete = 0
	type String v1 = dep.anlled
	if v1.isNull() set v1=(PSL.maxCharValue-1).char()
	type String v3 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^DAYEND(v1,"NETLOSS",v3)) do vidxerr("ANLLED")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^DAYEND(v1,"NETLOSS",v3)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("ANLLED").exists() set v1=vx("ANLLED").piece("|",1) set:v1.isNull() v1=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^DAYEND(v1,"NETLOSS",v3)
	quit

vi3(RecordDEP dep) // Maintain ANLLINK index entries (Linked Accounts)

	type Public String vx()
	type Boolean vdelete = 0
	type String v2 = dep.anlcid
	if v2.isNull() set v2=(PSL.maxCharValue-1).char()
	type String v3 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^XREF("ANLLINK",v2,v3)) do vidxerr("ANLLINK")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^XREF("ANLLINK",v2,v3)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("ANLCID").exists() set v2=vx("ANLCID").piece("|",1) set:v2.isNull() v2=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^XREF("ANLLINK",v2,v3)
	quit

vi4(RecordDEP dep) // Maintain ANLOFFED index entries (Analysis Offset End Date)

	type Public String vx()
	type Boolean vdelete = 0
	type String v1 = dep.anloffed
	if v1.isNull() set v1=(PSL.maxCharValue-1).char()
	type String v3 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^DAYEND(v1,"ANLOFF",v3)) do vidxerr("ANLOFFED")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^DAYEND(v1,"ANLOFF",v3)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("ANLOFFED").exists() set v1=vx("ANLOFFED").piece("|",1) set:v1.isNull() v1=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^DAYEND(v1,"ANLOFF",v3)
	quit

vi5(RecordDEP dep) // Maintain AREF index entries (Loan Account Number)

	type Public String vx()
	type Boolean vdelete = 0
	type String v2 = dep.aref
	if v2.isNull() set v2=(PSL.maxCharValue-1).char()
	type String v3 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^XREF("AREF",v2,v3)) do vidxerr("AREF")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^XREF("AREF",v2,v3)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("AREF").exists() set v2=vx("AREF").piece("|",1) set:v2.isNull() v2=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^XREF("AREF",v2,v3)
	quit

vi6(RecordDEP dep) // Maintain AWTI index entries (Accrued Withholding Tax Index)

	type Public String vx()
	type Boolean vdelete = 0
	type String v2 = dep.awti
	if v2.isNull() set v2=(PSL.maxCharValue-1).char()
	type String v3 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^XREF("AWTI",v2,v3)) do vidxerr("AWTI")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^XREF("AWTI",v2,v3)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("AWTI").exists() set v2=vx("AWTI").piece("|",1) set:v2.isNull() v2=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^XREF("AWTI",v2,v3)
	quit

vi7(RecordDEP dep) // Maintain BGTRVUDT index entries (Budget Review Date)

	type Public String vx()
	type Boolean vdelete = 0
	type String v1 = dep.bgtrvudt
	if v1.isNull() set v1=(PSL.maxCharValue-1).char()
	type String v3 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^XACN(v1,"BGTRVUDT",v3)) do vidxerr("BGTRVUDT")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^XACN(v1,"BGTRVUDT",v3)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("BGTRVUDT").exists() set v1=vx("BGTRVUDT").piece("|",1) set:v1.isNull() v1=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^XACN(v1,"BGTRVUDT",v3)
	quit

vi8(RecordDEP dep) // Maintain BGTYRND index entries (Budget Year Next Date)

	type Public String vx()
	type Boolean vdelete = 0
	type String v1 = dep.bgtyrnd
	if v1.isNull() set v1=(PSL.maxCharValue-1).char()
	type String v3 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^XACN(v1,"BGTYRND",v3)) do vidxerr("BGTYRND")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^XACN(v1,"BGTYRND",v3)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("BGTYRND").exists() set v1=vx("BGTYRND").piece("|",1) set:v1.isNull() v1=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^XACN(v1,"BGTYRND",v3)
	quit

vi9(RecordDEP dep) // Maintain COLEXTRDYS index entries (Collection Extract Days)

	type Public String vx()
	type Boolean vdelete = 0
	type String v2 = dep.colextrdys
	if v2.isNull() set v2=(PSL.maxCharValue-1).char()
	type String v3 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^XREF("COLEXTRDYS",v2,v3)) do vidxerr("COLEXTRDYS")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^XREF("COLEXTRDYS",v2,v3)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("COLEXTRDYS").exists() set v2=vx("COLEXTRDYS").piece("|",1) set:v2.isNull() v2=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^XREF("COLEXTRDYS",v2,v3)
	quit

vi10(RecordDEP dep) // Maintain CTFGRP index entries (Commission/Tax/Fee Plan Group)

	type Public String vx()
	type Boolean vdelete = 0
	type String v2 = dep.ctfgrp
	if v2.isNull() set v2=(PSL.maxCharValue-1).char()
	type String v3 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^XREF("CTFGRP",v2,v3)) do vidxerr("CTFGRP")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^XREF("CTFGRP",v2,v3)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("CTFGRP").exists() set v2=vx("CTFGRP").piece("|",1) set:v2.isNull() v2=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^XREF("CTFGRP",v2,v3)
	quit

vi11(RecordDEP dep) // Maintain DEPLSP index entries (Tenant Account Index)

	type Public String vx()
	type Boolean vdelete = 0
	type String v2 = dep.laftfr
	if v2.isNull() set v2=(PSL.maxCharValue-1).char()
	type String v3 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^DEPLSP("LSP",v2,v3)) do vidxerr("DEPLSP")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^DEPLSP("LSP",v2,v3)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("LAFTFR").exists() set v2=vx("LAFTFR").piece("|",1) set:v2.isNull() v2=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^DEPLSP("LSP",v2,v3)
	quit

vi12(RecordDEP dep) // Maintain DEPSCH index entries (Scheduled Deposits Next Date)

	type Public String vx()
	type Boolean vdelete = 0
	type String v1 = dep.schdepnd
	if v1.isNull() set v1=(PSL.maxCharValue-1).char()
	type String v3 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^DAYEND(v1,"DEPSCH",v3)) do vidxerr("DEPSCH")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^DAYEND(v1,"DEPSCH",v3)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("SCHDEPND").exists() set v1=vx("SCHDEPND").piece("|",1) set:v1.isNull() v1=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^DAYEND(v1,"DEPSCH",v3)
	quit

vi13(RecordDEP dep) // Maintain DLYFEE index entries (Daily Fee)

	type Public String vx()
	type Boolean vdelete = 0
	type String v2 = dep.feepln
	if v2.isNull() set v2=(PSL.maxCharValue-1).char()
	type String v3 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^XREF("DLYFEE",v2,v3)) do vidxerr("DLYFEE")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^XREF("DLYFEE",v2,v3)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("FEEPLN").exists() set v2=vx("FEEPLN").piece("|",1) set:v2.isNull() v2=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^XREF("DLYFEE",v2,v3)
	quit

vi14(RecordDEP dep) // Maintain DTC index entries (Closed Account Index)

	type Public String vx()
	type Boolean vdelete = 0
	type String v1 = dep.dtc
	if v1.isNull() set v1=(PSL.maxCharValue-1).char()
	type String v2 = dep.cls
	if v2.isNull() set v2=(PSL.maxCharValue-1).char()
	type String v3 = dep.grp
	if v3.isNull() set v3=(PSL.maxCharValue-1).char()
	type String v4 = dep.type
	if v4.isNull() set v4=(PSL.maxCharValue-1).char()
	type String v5 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^DTJCL(v1,v2,v3,v4,v5)) do vidxerr("DTC")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^DTJCL(v1,v2,v3,v4,v5)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("DTC").exists() set v1=vx("DTC").piece("|",1) set:v1.isNull() v1=(PSL.maxCharValue-1).char()
	if vx("CLS").exists() set v2=vx("CLS").piece("|",1) set:v2.isNull() v2=(PSL.maxCharValue-1).char()
	if vx("GRP").exists() set v3=vx("GRP").piece("|",1) set:v3.isNull() v3=(PSL.maxCharValue-1).char()
	if vx("TYPE").exists() set v4=vx("TYPE").piece("|",1) set:v4.isNull() v4=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^DTJCL(v1,v2,v3,v4,v5)
	quit

vi15(RecordDEP dep) // Maintain EMPLCTA index entries (Employer/Customer/Type/Accoun)

	type Public String vx()
	type Boolean vdelete = 0
	type String v2 = dep.emplno
	if v2.isNull() set v2=(PSL.maxCharValue-1).char()
	type String v3 = dep.acn
	if v3.isNull() set v3=(PSL.maxCharValue-1).char()
	type String v4 = dep.type
	if v4.isNull() set v4=(PSL.maxCharValue-1).char()
	type String v5 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^XREF("EMPLCTA",v2,v3,v4,v5)) do vidxerr("EMPLCTA")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^XREF("EMPLCTA",v2,v3,v4,v5)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("EMPLNO").exists() set v2=vx("EMPLNO").piece("|",1) set:v2.isNull() v2=(PSL.maxCharValue-1).char()
	if vx("ACN").exists() set v3=vx("ACN").piece("|",1) set:v3.isNull() v3=(PSL.maxCharValue-1).char()
	if vx("TYPE").exists() set v4=vx("TYPE").piece("|",1) set:v4.isNull() v4=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^XREF("EMPLCTA",v2,v3,v4,v5)
	quit

vi16(RecordDEP dep) // Maintain EMPLNO index entries (Employer Code)

	type Public String vx()
	type Boolean vdelete = 0
	type String v2 = dep.type
	if v2.isNull() set v2=(PSL.maxCharValue-1).char()
	type String v3 = dep.emplno
	if v3.isNull() set v3=(PSL.maxCharValue-1).char()
	type String v4 = dep.acn
	if v4.isNull() set v4=(PSL.maxCharValue-1).char()
	type String v5 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^XREF("EMPLNO",v2,v3,v4,v5)) do vidxerr("EMPLNO")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^XREF("EMPLNO",v2,v3,v4,v5)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("TYPE").exists() set v2=vx("TYPE").piece("|",1) set:v2.isNull() v2=(PSL.maxCharValue-1).char()
	if vx("EMPLNO").exists() set v3=vx("EMPLNO").piece("|",1) set:v3.isNull() v3=(PSL.maxCharValue-1).char()
	if vx("ACN").exists() set v4=vx("ACN").piece("|",1) set:v4.isNull() v4=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^XREF("EMPLNO",v2,v3,v4,v5)
	quit

vi17(RecordDEP dep) // Maintain GCRCID index entries (GCR Accounts)

	type Public String vx()
	type Boolean vdelete = 0
	type String v2 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^XREF("GCR",v2)) do vidxerr("GCRCID")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^XREF("GCR",v2)="" quit
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^XREF("GCR",v2)
	quit

vi18(RecordDEP dep) // Maintain GCRNXDAT index entries (Next Scoring Date)

	type Public String vx()
	type Boolean vdelete = 0
	type String v1 = dep.nsdate
	if v1.isNull() set v1=(PSL.maxCharValue-1).char()
	type String v3 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^DAYEND(v1,"GCRMS",v3)) do vidxerr("GCRNXDAT")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^DAYEND(v1,"GCRMS",v3)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("NSDATE").exists() set v1=vx("NSDATE").piece("|",1) set:v1.isNull() v1=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^DAYEND(v1,"GCRMS",v3)
	quit

vi19(RecordDEP dep) // Maintain INDEXAI index entries (Available Interest Plan)

	type Public String vx()
	type Boolean vdelete = 0
	type String v2 = dep.aiindex
	if v2.isNull() set v2=(PSL.maxCharValue-1).char()
	type String v3 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^XREF("INDEXAI",v2,v3)) do vidxerr("INDEXAI")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^XREF("INDEXAI",v2,v3)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("AIINDEX").exists() set v2=vx("AIINDEX").piece("|",1) set:v2.isNull() v2=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^XREF("INDEXAI",v2,v3)
	quit

vi20(RecordDEP dep) // Maintain INTINDEX index entries (Interest Index)

	type Public String vx()
	type Boolean vdelete = 0
	type String v2 = dep.index
	if v2.isNull() set v2=(PSL.maxCharValue-1).char()
	type String v3 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^XREF("INDEX",v2,v3)) do vidxerr("INTINDEX")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^XREF("INDEX",v2,v3)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("INDEX").exists() set v2=vx("INDEX").piece("|",1) set:v2.isNull() v2=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^XREF("INDEX",v2,v3)
	quit

vi21(RecordDEP dep) // Maintain ITRF index entries (Interest Transfer Account)

	type Public String vx()
	type Boolean vdelete = 0
	type String v2 = dep.itrf
	if v2.isNull() set v2=(PSL.maxCharValue-1).char()
	type String v3 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^XREF("ITRF",v2,v3)) do vidxerr("ITRF")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^XREF("ITRF",v2,v3)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("ITRF").exists() set v2=vx("ITRF").piece("|",1) set:v2.isNull() v2=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^XREF("ITRF",v2,v3)
	quit

vi22(RecordDEP dep) // Maintain MATRIX index entries (Interest Matrix Processing)

	type Public String vx()
	type Boolean vdelete = 0
	type String v2 = dep.intmat
	if v2.isNull() set v2=(PSL.maxCharValue-1).char()
	type String v3 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^XREF("MATATT",v2,v3)) do vidxerr("MATRIX")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^XREF("MATATT",v2,v3)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("INTMAT").exists() set v2=vx("INTMAT").piece("|",1) set:v2.isNull() v2=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^XREF("MATATT",v2,v3)
	quit

vi23(RecordDEP dep) // Maintain MATRIXAI index entries (Available Interest Matrix)

	type Public String vx()
	type Boolean vdelete = 0
	type String v2 = dep.aiintmat
	if v2.isNull() set v2=(PSL.maxCharValue-1).char()
	type String v3 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^XREF("MATATTAI",v2,v3)) do vidxerr("MATRIXAI")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^XREF("MATATTAI",v2,v3)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("AIINTMAT").exists() set v2=vx("AIINTMAT").piece("|",1) set:v2.isNull() v2=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^XREF("MATATTAI",v2,v3)
	quit

vi24(RecordDEP dep) // Maintain MDT index entries (Account Maturity Date)

	type Public String vx()
	type Boolean vdelete = 0
	type String v1 = dep.mdt
	if v1.isNull() set v1=(PSL.maxCharValue-1).char()
	type String v3 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^DAYEND(v1,"MDT",v3)) do vidxerr("MDT")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^DAYEND(v1,"MDT",v3)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("MDT").exists() set v1=vx("MDT").piece("|",1) set:v1.isNull() v1=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^DAYEND(v1,"MDT",v3)
	quit

vi25(RecordDEP dep) // Maintain MLD index entries (Maturity - Last Date)

	type Public String vx()
	type Boolean vdelete = 0
	type String v2 = dep.mld
	if v2.isNull() set v2=(PSL.maxCharValue-1).char()
	type String v3 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^XREF("MLD",v2,v3)) do vidxerr("MLD")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^XREF("MLD",v2,v3)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("MLD").exists() set v2=vx("MLD").piece("|",1) set:v2.isNull() v2=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^XREF("MLD",v2,v3)
	quit

vi26(RecordDEP dep) // Maintain OID index entries (Oid Account Flag)

	type Public String vx()
	type Boolean vdelete = 0
	type String v2 = +dep.oid
	if v2.isNull() set v2=(PSL.maxCharValue-1).char()
	type String v3 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^XREF("OID",v2,v3)) do vidxerr("OID")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^XREF("OID",v2,v3)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("OID").exists() set v2=vx("OID").piece("|",1) set:v2.isNull() v2=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^XREF("OID",v2,v3)
	quit

vi27(RecordDEP dep) // Maintain RACN index entries (Rollover Transfer Account)

	type Public String vx()
	type Boolean vdelete = 0
	type String v2 = dep.racn
	if v2.isNull() set v2=(PSL.maxCharValue-1).char()
	type String v3 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^XREF("RACN",v2,v3)) do vidxerr("RACN")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^XREF("RACN",v2,v3)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("RACN").exists() set v2=vx("RACN").piece("|",1) set:v2.isNull() v2=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^XREF("RACN",v2,v3)
	quit

vi28(RecordDEP dep) // Maintain SCHCON index entries (Budget Contribution)

	type Public String vx()
	type Boolean vdelete = 0
	type String v1 = dep.bgtncdt
	if v1.isNull() set v1=(PSL.maxCharValue-1).char()
	type String v3 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^DAYEND(v1,"SCHCON",v3)) do vidxerr("SCHCON")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^DAYEND(v1,"SCHCON",v3)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("BGTNCDT").exists() set v1=vx("BGTNCDT").piece("|",1) set:v1.isNull() v1=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^DAYEND(v1,"SCHCON",v3)
	quit

vi29(RecordDEP dep) // Maintain SCND index entries (Service Charge)

	type Public String vx()
	type Boolean vdelete = 0
	type String v1 = dep.scnd
	if v1.isNull() set v1=(PSL.maxCharValue-1).char()
	type String v3 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^DAYEND(v1,"SCND",v3)) do vidxerr("SCND")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^DAYEND(v1,"SCND",v3)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("SCND").exists() set v1=vx("SCND").piece("|",1) set:v1.isNull() v1=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^DAYEND(v1,"SCND",v3)
	quit

vi30(RecordDEP dep) // Maintain SVCFEEUF index entries (Service fee Use Flag)

	type Public String vx()
	type Boolean vdelete = 0
	type String v2 = dep.svcfeecid
	if v2.isNull() set v2=(PSL.maxCharValue-1).char()
	type String v3 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^XREF("SVCFEECID",v2,v3)) do vidxerr("SVCFEEUF")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^XREF("SVCFEECID",v2,v3)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("SVCFEECID").exists() set v2=vx("SVCFEECID").piece("|",1) set:v2.isNull() v2=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^XREF("SVCFEECID",v2,v3)
	quit

vi31(RecordDEP dep) // Maintain SW940 index entries (Generate MT940)

	type Public String vx()
	type Boolean vdelete = 0
	type Boolean vflag = 0
	type String v1 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if $$vq31(.dep) if '$D(^SW940(v1)) do vidxerr("SW940")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 if $$vq31(.dep) set vflag=1 set ^SW940(v1)="" quit
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if (%ProcessMode=3)!'$$vq31(.dep)  kill ^SW940(v1)
	quit

vq31(RecordDEP dep) // Conditional index query for Generate MT940

	if '(+dep.mt940=1) quit 0
	quit 1


vi32(RecordDEP dep) // Maintain TREXD index entries (Teaser Rate - Expira)

	type Public String vx()
	type Boolean vdelete = 0
	type String v1 = dep.trexd
	if v1.isNull() set v1=(PSL.maxCharValue-1).char()
	type String v3 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^DAYEND(v1,"TSR",v3)) do vidxerr("TREXD")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^DAYEND(v1,"TSR",v3)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("TREXD").exists() set v1=vx("TREXD").piece("|",1) set:v1.isNull() v1=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^DAYEND(v1,"TSR",v3)
	quit

vi33(RecordDEP dep) // Maintain UPNDT index entries (Usage Credit Plan Next Date)

	type Public String vx()
	type Boolean vdelete = 0
	type String v1 = dep.upndt
	if v1.isNull() set v1=(PSL.maxCharValue-1).char()
	type String v3 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^DAYEND(v1,"UPNDT",v3)) do vidxerr("UPNDT")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^DAYEND(v1,"UPNDT",v3)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("UPNDT").exists() set v1=vx("UPNDT").piece("|",1) set:v1.isNull() v1=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^DAYEND(v1,"UPNDT",v3)
	quit

vi34(RecordDEP dep) // Maintain XACN index entries (Primary CIF/Account Index)

	type Public String vx()
	type Boolean vdelete = 0
	type String v1 = dep.cls
	if v1.isNull() set v1=(PSL.maxCharValue-1).char()
	type String v2 = dep.acn
	if v2.isNull() set v2=(PSL.maxCharValue-1).char()
	type String v3 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^XACN(v1,v2,v3)) do vidxerr("XACN")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^XACN(v1,v2,v3)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("CLS").exists() set v1=vx("CLS").piece("|",1) set:v1.isNull() v1=(PSL.maxCharValue-1).char()
	if vx("ACN").exists() set v2=vx("ACN").piece("|",1) set:v2.isNull() v2=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^XACN(v1,v2,v3)
	quit

vi35(RecordDEP dep) // Maintain XBRCD index entries (Branch of Ownership/Account)

	type Public String vx()
	type Boolean vdelete = 0
	type String v2 = +dep.boo
	if v2.isNull() set v2=(PSL.maxCharValue-1).char()
	type String v3 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^XREF("XBRCD",v2,v3)) do vidxerr("XBRCD")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^XREF("XBRCD",v2,v3)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("BOO").exists() set v2=vx("BOO").piece("|",1) set:v2.isNull() v2=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^XREF("XBRCD",v2,v3)
	quit

vi36(RecordDEP dep) // Maintain XCC index entries (Cost Center Cross-Reference)

	type Public String vx()
	type Boolean vdelete = 0
	type String v1 = dep.cc
	if v1.isNull() set v1=(PSL.maxCharValue-1).char()
	type String v2 = dep.cls
	if v2.isNull() set v2=(PSL.maxCharValue-1).char()
	type String v3 = dep.grp
	if v3.isNull() set v3=(PSL.maxCharValue-1).char()
	type String v4 = dep.type
	if v4.isNull() set v4=(PSL.maxCharValue-1).char()
	type String v5 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^XCC(v1,v2,v3,v4,v5)) do vidxerr("XCC")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^XCC(v1,v2,v3,v4,v5)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("CC").exists() set v1=vx("CC").piece("|",1) set:v1.isNull() v1=(PSL.maxCharValue-1).char()
	if vx("CLS").exists() set v2=vx("CLS").piece("|",1) set:v2.isNull() v2=(PSL.maxCharValue-1).char()
	if vx("GRP").exists() set v3=vx("GRP").piece("|",1) set:v3.isNull() v3=(PSL.maxCharValue-1).char()
	if vx("TYPE").exists() set v4=vx("TYPE").piece("|",1) set:v4.isNull() v4=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^XCC(v1,v2,v3,v4,v5)
	quit

vi37(RecordDEP dep) // Maintain XCLS index entries (Class/Group/Type)

	type Public String vx()
	type Boolean vdelete = 0
	type String v1 = dep.cls
	if v1.isNull() set v1=(PSL.maxCharValue-1).char()
	type String v2 = dep.grp
	if v2.isNull() set v2=(PSL.maxCharValue-1).char()
	type String v3 = dep.type
	if v3.isNull() set v3=(PSL.maxCharValue-1).char()
	type String v4 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^XCLS(v1,v2,v3,v4)) do vidxerr("XCLS")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^XCLS(v1,v2,v3,v4)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("CLS").exists() set v1=vx("CLS").piece("|",1) set:v1.isNull() v1=(PSL.maxCharValue-1).char()
	if vx("GRP").exists() set v2=vx("GRP").piece("|",1) set:v2.isNull() v2=(PSL.maxCharValue-1).char()
	if vx("TYPE").exists() set v3=vx("TYPE").piece("|",1) set:v3.isNull() v3=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^XCLS(v1,v2,v3,v4)
	quit

vi38(RecordDEP dep) // Maintain XCLSACN index entries (Class/Account)

	type Public String vx()
	type Boolean vdelete = 0
	type String v1 = dep.cls
	if v1.isNull() set v1=(PSL.maxCharValue-1).char()
	type String v2 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^XCLSACN(v1,v2)) do vidxerr("XCLSACN")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^XCLSACN(v1,v2)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("CLS").exists() set v1=vx("CLS").piece("|",1) set:v1.isNull() v1=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^XCLSACN(v1,v2)
	quit

vi39(RecordDEP dep) // Maintain XCRCD index entries (Currency Code)

	type Public String vx()
	type Boolean vdelete = 0
	type String v1 = dep.cls
	if v1.isNull() set v1=(PSL.maxCharValue-1).char()
	type String v2 = dep.grp
	if v2.isNull() set v2=(PSL.maxCharValue-1).char()
	type String v3 = dep.type
	if v3.isNull() set v3=(PSL.maxCharValue-1).char()
	type String v4 = dep.crcd
	if v4.isNull() set v4=(PSL.maxCharValue-1).char()
	type String v5 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^XCRCD(v1,v2,v3,v4,v5)) do vidxerr("XCRCD")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^XCRCD(v1,v2,v3,v4,v5)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("CLS").exists() set v1=vx("CLS").piece("|",1) set:v1.isNull() v1=(PSL.maxCharValue-1).char()
	if vx("GRP").exists() set v2=vx("GRP").piece("|",1) set:v2.isNull() v2=(PSL.maxCharValue-1).char()
	if vx("TYPE").exists() set v3=vx("TYPE").piece("|",1) set:v3.isNull() v3=(PSL.maxCharValue-1).char()
	if vx("CRCD").exists() set v4=vx("CRCD").piece("|",1) set:v4.isNull() v4=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^XCRCD(v1,v2,v3,v4,v5)
	quit

vi40(RecordDEP dep) // Maintain XIRA index entries (IRA Index)

	type Public String vx()
	type Boolean vdelete = 0
	type String v1 = dep.ira
	if v1.isNull() set v1=(PSL.maxCharValue-1).char()
	type String v2 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^XIRA(v1,v2)) do vidxerr("XIRA")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^XIRA(v1,v2)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("IRA").exists() set v1=vx("IRA").piece("|",1) set:v1.isNull() v1=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^XIRA(v1,v2)
	quit

vi41(RecordDEP dep) // Maintain XNOS index entries (Nostro Account X-REF File)

	type Public String vx()
	type Boolean vdelete = 0
	type String v1 = dep.corre
	if v1.isNull() set v1=(PSL.maxCharValue-1).char()
	type String v2 = dep.crcd
	if v2.isNull() set v2=(PSL.maxCharValue-1).char()
	type String v3 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^XNOS(v1,v2,v3)) do vidxerr("XNOS")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^XNOS(v1,v2,v3)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("CORRE").exists() set v1=vx("CORRE").piece("|",1) set:v1.isNull() v1=(PSL.maxCharValue-1).char()
	if vx("CRCD").exists() set v2=vx("CRCD").piece("|",1) set:v2.isNull() v2=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^XNOS(v1,v2,v3)
	quit

vi42(RecordDEP dep) // Maintain XODLIM index entries ( Authorized Overdraft Limit)

	type Public String vx()
	type Boolean vdelete = 0
	type String v1 = dep.cid
	type String v2 = dep.commfper
	if v2.isNull() set v2=(PSL.maxCharValue-1).char()

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^XODLIM(v1,v2)) do vidxerr("XODLIM")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^XODLIM(v1,v2)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("COMMFPER").exists() set v2=vx("COMMFPER").piece("|",1) set:v2.isNull() v2=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^XODLIM(v1,v2)
	quit

vi43(RecordDEP dep) // Maintain XREFRPASEQ index entries (RPASEQ X-REF)

	type Public String vx()
	type Boolean vdelete = 0
	type String v2 = dep.acn
	if v2.isNull() set v2=(PSL.maxCharValue-1).char()
	type String v3 = dep.rpaseq
	if v3.isNull() set v3=(PSL.maxCharValue-1).char()
	type String v4 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^XREF("XRPASEQ",v2,v3,v4)) do vidxerr("XREFRPASEQ")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^XREF("XRPASEQ",v2,v3,v4)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("ACN").exists() set v2=vx("ACN").piece("|",1) set:v2.isNull() v2=(PSL.maxCharValue-1).char()
	if vx("RPASEQ").exists() set v3=vx("RPASEQ").piece("|",1) set:v3.isNull() v3=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^XREF("XRPASEQ",v2,v3,v4)
	quit

vi44(RecordDEP dep) // Maintain XREFXLNR index entries (Provision Accounts)

	type Public String vx()
	type Boolean vdelete = 0
	type String v2 = dep.cls
	if v2.isNull() set v2=(PSL.maxCharValue-1).char()
	type String v3 = +dep.boo
	if v3.isNull() set v3=(PSL.maxCharValue-1).char()
	type String v4 = dep.provcat
	if v4.isNull() set v4=(PSL.maxCharValue-1).char()
	type String v5 = dep.type
	if v5.isNull() set v5=(PSL.maxCharValue-1).char()
	type String v6 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^XREF("PROVPOST",v2,v3,v4,v5,v6)) do vidxerr("XREFXLNR")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^XREF("PROVPOST",v2,v3,v4,v5,v6)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("CLS").exists() set v2=vx("CLS").piece("|",1) set:v2.isNull() v2=(PSL.maxCharValue-1).char()
	if vx("BOO").exists() set v3=vx("BOO").piece("|",1) set:v3.isNull() v3=(PSL.maxCharValue-1).char()
	if vx("PROVCAT").exists() set v4=vx("PROVCAT").piece("|",1) set:v4.isNull() v4=(PSL.maxCharValue-1).char()
	if vx("TYPE").exists() set v5=vx("TYPE").piece("|",1) set:v5.isNull() v5=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^XREF("PROVPOST",v2,v3,v4,v5,v6)
	quit

vi45(RecordDEP dep) // Maintain XRSPPLID index entries (RPA index file)

	type Public String vx()
	type Boolean vdelete = 0
	type String v2 = dep.acn
	if v2.isNull() set v2=(PSL.maxCharValue-1).char()
	type String v3 = dep.rpaseq
	if v3.isNull() set v3=(PSL.maxCharValue-1).char()
	type String v4 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^XREF("XPLID",v2,v3,v4)) do vidxerr("XRSPPLID")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^XREF("XPLID",v2,v3,v4)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("ACN").exists() set v2=vx("ACN").piece("|",1) set:v2.isNull() v2=(PSL.maxCharValue-1).char()
	if vx("RPASEQ").exists() set v3=vx("RPASEQ").piece("|",1) set:v3.isNull() v3=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^XREF("XPLID",v2,v3,v4)
	quit

vi46(RecordDEP dep) // Maintain XSERNUM index entries (Serial Number)

	type Public String vx()
	type Boolean vdelete = 0
	type String v2 = dep.pbksn
	if v2.isNull() set v2=(PSL.maxCharValue-1).char()
	type String v3 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if '$D(^XREF("XSER",v2,v3)) do vidxerr("XSERNUM")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 set ^XREF("XSER",v2,v3)="" 
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1
	if vx("PBKSN").exists() set v2=vx("PBKSN").piece("|",1) set:v2.isNull() v2=(PSL.maxCharValue-1).char()

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	kill ^XREF("XSER",v2,v3)
	quit

vi47(RecordDEP dep) // Maintain XVOSTRO index entries (Vostro Account Index)

	type Public String vx()
	type Boolean vdelete = 0
	type Boolean vflag = 0
	type String v1 = dep.cid

	if %ProcessMode=2 do { quit

		// Allow global reference
		#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
		if $$vq47(.dep) if '$D(^XVOSTRO(v1)) do vidxerr("XVOSTRO")
		}


	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if %ProcessMode<2 if $$vq47(.dep) set vflag=1 set ^XVOSTRO(v1)="" quit
	quit:%ProcessMode=0

	if %ProcessMode=3 set vdelete=1

	// Allow global reference
	#ACCEPT DATE=04/22/04; PGM=Dan Russell; CR=20602
	if (%ProcessMode=3)!'$$vq47(.dep)  kill ^XVOSTRO(v1)
	quit

vq47(RecordDEP dep) // Conditional index query for Vostro Account Index

	if '(+dep.vostro=1!(+dep.mt950=1)) quit 0
	quit 1


public VIDXBLD(List vlist) // Rebuild index files (External call)


	type Number %ProcessMode=0                             // Create mode
	type Number i

	if vlist.get().isNull() set vlist="VINDEX"             // Build all

	type DbSet ds=Db.selectDbSet("DEP")

	while ds.next() do {
		type RecordDEP dep=ds.getRecord("DEP")
		if vlist.contains("VINDEX") do VINDEX(.dep) quit
		if vlist.contains("ACONVACN") do vi1(.dep)
		if vlist.contains("ANLLED") do vi2(.dep)
		if vlist.contains("ANLLINK") do vi3(.dep)
		if vlist.contains("ANLOFFED") do vi4(.dep)
		if vlist.contains("AREF") do vi5(.dep)
		if vlist.contains("AWTI") do vi6(.dep)
		if vlist.contains("BGTRVUDT") do vi7(.dep)
		if vlist.contains("BGTYRND") do vi8(.dep)
		if vlist.contains("COLEXTRDYS") do vi9(.dep)
		if vlist.contains("CTFGRP") do vi10(.dep)
		if vlist.contains("DEPLSP") do vi11(.dep)
		if vlist.contains("DEPSCH") do vi12(.dep)
		if vlist.contains("DLYFEE") do vi13(.dep)
		if vlist.contains("DTC") do vi14(.dep)
		if vlist.contains("EMPLCTA") do vi15(.dep)
		if vlist.contains("EMPLNO") do vi16(.dep)
		if vlist.contains("GCRCID") do vi17(.dep)
		if vlist.contains("GCRNXDAT") do vi18(.dep)
		if vlist.contains("INDEXAI") do vi19(.dep)
		if vlist.contains("INTINDEX") do vi20(.dep)
		if vlist.contains("ITRF") do vi21(.dep)
		if vlist.contains("MATRIX") do vi22(.dep)
		if vlist.contains("MATRIXAI") do vi23(.dep)
		if vlist.contains("MDT") do vi24(.dep)
		if vlist.contains("MLD") do vi25(.dep)
		if vlist.contains("OID") do vi26(.dep)
		if vlist.contains("RACN") do vi27(.dep)
		if vlist.contains("SCHCON") do vi28(.dep)
		if vlist.contains("SCND") do vi29(.dep)
		if vlist.contains("SVCFEEUF") do vi30(.dep)
		if vlist.contains("SW940") do vi31(.dep)
		if vlist.contains("TREXD") do vi32(.dep)
		if vlist.contains("UPNDT") do vi33(.dep)
		if vlist.contains("XACN") do vi34(.dep)
		if vlist.contains("XBRCD") do vi35(.dep)
		if vlist.contains("XCC") do vi36(.dep)
		if vlist.contains("XCLS") do vi37(.dep)
		if vlist.contains("XCLSACN") do vi38(.dep)
		if vlist.contains("XCRCD") do vi39(.dep)
		if vlist.contains("XIRA") do vi40(.dep)
		if vlist.contains("XNOS") do vi41(.dep)
		if vlist.contains("XODLIM") do vi42(.dep)
		if vlist.contains("XREFRPASEQ") do vi43(.dep)
		if vlist.contains("XREFXLNR") do vi44(.dep)
		if vlist.contains("XRSPPLID") do vi45(.dep)
		if vlist.contains("XSERNUM") do vi46(.dep)
		if vlist.contains("XVOSTRO") do vi47(.dep)
	}

	quit


public VIDXBLD1(RecordDEP dep, List vlist) // Rebuild index files for one record (External call)


	type Number i

	if vlist.contains("VINDEX") do VINDEX(.dep) quit
	if vlist.contains("ACONVACN") do vi1(.dep)
	if vlist.contains("ANLLED") do vi2(.dep)
	if vlist.contains("ANLLINK") do vi3(.dep)
	if vlist.contains("ANLOFFED") do vi4(.dep)
	if vlist.contains("AREF") do vi5(.dep)
	if vlist.contains("AWTI") do vi6(.dep)
	if vlist.contains("BGTRVUDT") do vi7(.dep)
	if vlist.contains("BGTYRND") do vi8(.dep)
	if vlist.contains("COLEXTRDYS") do vi9(.dep)
	if vlist.contains("CTFGRP") do vi10(.dep)
	if vlist.contains("DEPLSP") do vi11(.dep)
	if vlist.contains("DEPSCH") do vi12(.dep)
	if vlist.contains("DLYFEE") do vi13(.dep)
	if vlist.contains("DTC") do vi14(.dep)
	if vlist.contains("EMPLCTA") do vi15(.dep)
	if vlist.contains("EMPLNO") do vi16(.dep)
	if vlist.contains("GCRCID") do vi17(.dep)
	if vlist.contains("GCRNXDAT") do vi18(.dep)
	if vlist.contains("INDEXAI") do vi19(.dep)
	if vlist.contains("INTINDEX") do vi20(.dep)
	if vlist.contains("ITRF") do vi21(.dep)
	if vlist.contains("MATRIX") do vi22(.dep)
	if vlist.contains("MATRIXAI") do vi23(.dep)
	if vlist.contains("MDT") do vi24(.dep)
	if vlist.contains("MLD") do vi25(.dep)
	if vlist.contains("OID") do vi26(.dep)
	if vlist.contains("RACN") do vi27(.dep)
	if vlist.contains("SCHCON") do vi28(.dep)
	if vlist.contains("SCND") do vi29(.dep)
	if vlist.contains("SVCFEEUF") do vi30(.dep)
	if vlist.contains("SW940") do vi31(.dep)
	if vlist.contains("TREXD") do vi32(.dep)
	if vlist.contains("UPNDT") do vi33(.dep)
	if vlist.contains("XACN") do vi34(.dep)
	if vlist.contains("XBRCD") do vi35(.dep)
	if vlist.contains("XCC") do vi36(.dep)
	if vlist.contains("XCLS") do vi37(.dep)
	if vlist.contains("XCLSACN") do vi38(.dep)
	if vlist.contains("XCRCD") do vi39(.dep)
	if vlist.contains("XIRA") do vi40(.dep)
	if vlist.contains("XNOS") do vi41(.dep)
	if vlist.contains("XODLIM") do vi42(.dep)
	if vlist.contains("XREFRPASEQ") do vi43(.dep)
	if vlist.contains("XREFXLNR") do vi44(.dep)
	if vlist.contains("XRSPPLID") do vi45(.dep)
	if vlist.contains("XSERNUM") do vi46(.dep)
	if vlist.contains("XVOSTRO") do vi47(.dep)

	quit


vidxerr(di) // Error message

	D SETERR^DBSEXECU("DEP","MSG",1225,"DEP."_di)

	quit
