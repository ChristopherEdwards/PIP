PROCINV		/*
	---- Revision History ------------------------------------------------
	12/01/05 - ALAGARSS - CR 18006
		   Removed deprecated method Db.getOneRow and replaced with
		   Db.getRecord.
		   
	08/12/99 - Terrie Dougherty - 33890
		   Convert to PSL. Remove old change history.

	02/08/99 - Terrie Dougherty - 31734
		   Modified to use PRODDFTD rather than PRODCTL. Data item was
		   removed from PRODCTL.
	
	*/
	
	quit 
	// "Deposit product types only"


VERTYPE(ITYPE,ICRCD)	// Verify the validity of investment product type

	/*
	This section handles all necessary validation for investment product
	types. It is called from the DEP101 filer (for creation of new
	accounts) and investment plan user table maintenance.
	*/
	type public Boolean ER
	type public String INVTYPE
	
	type RecordPRODDFTD proddftd=Db.getRecord("PRODDFTD","TYPE=:ITYPE")
	set INVTYPE=proddftd.cls_"|"_proddftd.swpf_"|"_proddftd.grp
	
	// Deposit product types only
	if $P(INVTYPE,"|",1)'="D" do Runtime.setErrSTBLER("PRODDFTD","INVTYPD") quit:ER
	
	// Investment Sweep Code - Not an allowable investment type
	if $P(INVTYPE,"|",2)'=2 do Runtime.setErrMSG("PRODDFTD",2029) quit:ER
	
	// Group ~p1 not valid for investment sweep processing
	if $P(INVTYPE,"|",3)="ESC" do Runtime.setErrMSG("PRODDFTD",2853,"ESC") quit:ER 

	quit 

vSIG()	quit "60256^31070^Sivakumar Alagarsamy^1263"	// Signature - LTD^TIME^USER^SIZE
